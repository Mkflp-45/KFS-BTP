<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administration - KFS BTP</title>
    <meta name="description" content="Panneau d'administration KFS BTP">
    <meta name="author" content="KFS BTP IMMO">
    <meta name="robots" content="noindex, nofollow">
    <link rel="icon" type="image/jpeg" href="assets/logo-kfs-btp.jpeg">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- jsPDF pour g√©n√©ration PDF fiche de paie -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- html2pdf.js pour g√©n√©ration PDF attestation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1e3a8a">
    <link rel="apple-touch-icon" href="assets/logo-kfs-btp.jpeg">
    <style>
        * { font-family: 'Inter', sans-serif; }
        body { background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%); }
        .sidebar { background: linear-gradient(180deg, #1e3a8a 0%, #1e40af 50%, #3b82f6 100%); }
        .glass-card { background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); }
        .glass-dark { background: rgba(30,41,59,0.8); backdrop-filter: blur(10px); }
        .stat-card { transition: all 0.3s ease; }
        .stat-card:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0,0,0,0.2); }
        .nav-link { transition: all 0.2s ease; }
        .nav-link:hover, .nav-link.active { background: rgba(255,255,255,0.15); border-left: 3px solid #fbbf24; }
        .module-section { display: none; }
        .module-section.active { display: block; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .badge-pulse { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .scrollbar-thin::-webkit-scrollbar { width: 6px; }
        .scrollbar-thin::-webkit-scrollbar-track { background: #1e293b; }
        .scrollbar-thin::-webkit-scrollbar-thumb { background: #3b82f6; border-radius: 3px; }
        .message-card { border-left: 4px solid #3b82f6; }
        .message-card.unread { border-left-color: #f59e0b; background: #fffbeb; }
        .chart-bar { transition: height 0.5s ease; }
        /* Notifications */
        .notification-toast { position: fixed; top: 20px; right: 20px; z-index: 9999; animation: slideInRight 0.3s ease; }
        @keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes slideOutRight { from { transform: translateX(0); opacity: 1; } to { transform: translateX(100%); opacity: 0; } }
        .notification-toast.hide { animation: slideOutRight 0.3s ease forwards; }
        /* Calendrier */
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; }
        .calendar-day { aspect-ratio: 1; display: flex; align-items: center; justify-content: center; cursor: pointer; border-radius: 8px; transition: all 0.2s; }
        .calendar-day:hover { background: #e0e7ff; }
        .calendar-day.today { background: #3b82f6; color: white; font-weight: bold; }
        .calendar-day.has-event { position: relative; }
        .calendar-day.has-event::after { content: ''; position: absolute; bottom: 4px; width: 6px; height: 6px; background: #f59e0b; border-radius: 50%; }
        .calendar-day.selected { background: #1e40af; color: white; }
        /* PWA Install */
        .pwa-install-btn { background: linear-gradient(135deg, #10b981, #059669); }
        /* Analytics Charts */
        .chart-container { position: relative; height: 250px; }
        /* Comptabilit√© */
        .finance-card { transition: all 0.3s ease; border-left: 4px solid transparent; }
        .finance-card:hover { transform: translateX(5px); }
        .finance-card.income { border-left-color: #10b981; }
        .finance-card.expense { border-left-color: #ef4444; }
        /* Progress bars */
        .progress-bar { height: 8px; border-radius: 4px; overflow: hidden; background: #e5e7eb; }
        .progress-bar-fill { height: 100%; border-radius: 4px; transition: width 0.5s ease; }
        /* Print styles */
        @media print {
            .no-print { display: none !important; }
            .print-only { display: block !important; }
            body { background: white !important; }
            .glass-card { box-shadow: none !important; border: 1px solid #e5e7eb !important; }
        }
    </style>
</head>
<body class="min-h-screen text-white">
    
    <!-- √âcran de connexion -->
    <div id="login-screen" class="fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900">
        <div class="glass-card rounded-3xl p-10 shadow-2xl max-w-md w-full mx-4 animate__animated animate__fadeInUp">
            <div class="text-center mb-8">
                <img src="assets/logo-kfs-btp.jpeg" alt="Logo" class="w-20 h-20 mx-auto rounded-full shadow-xl border-4 border-blue-500 mb-4">
                <h1 class="text-3xl font-bold text-blue-900">KFS BTP Admin</h1>
                <p class="text-gray-500 mt-2">Connectez-vous pour acc√©der au tableau de bord</p>
            </div>
            <form id="login-form" class="space-y-6">
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">Email</label>
                    <input type="email" id="login-email" class="w-full px-4 py-3 border border-gray-200 rounded-xl bg-white/80 shadow-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition placeholder-gray-400" placeholder="votre@email.com" required>
                </div>
                <div class="mb-5">
                    <label class="block text-gray-700 font-medium mb-2">Mot de passe</label>
                    <input type="password" id="login-password" class="w-full px-4 py-3 border border-gray-200 rounded-xl bg-white/80 shadow-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition placeholder-gray-400" placeholder="Entrez votre mot de passe" required>
                </div>
                <button type="submit" id="login-btn" class="w-full bg-gradient-to-r from-blue-700 to-blue-500 text-white py-3 rounded-xl font-semibold shadow-lg hover:from-blue-800 hover:to-blue-600 transition duration-200 flex items-center justify-center">
                    <span id="login-btn-text">Connexion</span>
                    <span id="login-spinner" class="hidden ml-2 animate-spin">
                        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg>
                    </span>
                </button>
                <!-- Bouton Google Sign-In -->
                <button type="button" id="google-signin-btn" class="w-full mt-3 flex items-center justify-center gap-2 bg-white text-blue-700 border border-blue-200 py-3 rounded-xl font-semibold shadow hover:bg-blue-50 transition duration-200">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google" class="w-6 h-6">
                    <span>Connexion avec Google</span>
                </button>
                <p id="login-error" class="text-red-500 text-center hidden mt-3"></p>
                <p id="login-success" class="text-green-600 text-center hidden mt-3"></p>
                    <header>
                        <nav aria-label="Navigation principale">
                            <!-- Logo et titre accessibles -->
                            <div class="text-center mb-8">
                                <img src="assets/logo-kfs-btp.jpeg" alt="Logo KFS BTP IMMO" class="w-20 h-20 mx-auto rounded-full shadow-xl border-4 border-blue-500 mb-4">
                                <h1 class="text-3xl font-bold text-blue-900">KFS BTP Admin</h1>
                                <p class="text-gray-500 mt-2">Connectez-vous pour acc√©der au tableau de bord</p>
                            </div>
                        </nav>
                    </header>
                    <main id="main-content" tabindex="-1">
                        <!-- √âcran de connexion -->
                        <section aria-label="Connexion administrateur" class="flex items-center justify-center min-h-screen">
                            <div class="glass-card rounded-3xl p-10 shadow-2xl max-w-md w-full mx-4 animate__animated animate__fadeInUp">
                                <form id="login-form" class="space-y-6" autocomplete="on">
                                    <div class="mb-4">
                                        <label for="login-email" class="block text-gray-700 font-medium mb-2">Email</label>
                                        <input type="email" id="login-email" class="w-full px-4 py-3 border border-gray-200 rounded-xl bg-white/80 shadow-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition placeholder-gray-400" placeholder="votre@email.com" required autocomplete="username">
                                    </div>
                                    <div class="mb-5">
                                        <label for="login-password" class="block text-gray-700 font-medium mb-2">Mot de passe</label>
                                        <input type="password" id="login-password" class="w-full px-4 py-3 border border-gray-200 rounded-xl bg-white/80 shadow-sm focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition placeholder-gray-400" placeholder="Entrez votre mot de passe" required autocomplete="current-password">
                                    </div>
                                    <button type="submit" id="login-btn" class="w-full bg-gradient-to-r from-blue-700 to-blue-500 text-white py-3 rounded-xl font-semibold shadow-lg hover:from-blue-800 hover:to-blue-600 transition duration-200 flex items-center justify-center" aria-label="Connexion">
                                        <span id="login-btn-text">Connexion</span>
                                        <span id="login-spinner" class="hidden ml-2 animate-spin">
                                            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg>
                                        </span>
                                    </button>
                                    <!-- Bouton Google Sign-In -->
                                    <button type="button" id="google-signin-btn" class="w-full mt-3 flex items-center justify-center gap-2 bg-white text-blue-700 border border-blue-200 py-3 rounded-xl font-semibold shadow hover:bg-blue-50 transition duration-200" aria-label="Connexion avec Google">
                                        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Connexion Google" class="w-6 h-6">
                                        <span>Connexion avec Google</span>
                                    </button>
                                    <p id="login-error" class="text-red-500 text-center hidden mt-3" aria-live="polite"></p>
                                    <p id="login-success" class="text-green-600 text-center hidden mt-3" aria-live="polite"></p>
                                    <!-- Lien mot de passe oubli√© -->
                                    <div class="text-center mt-4">
                                        <button type="button" id="forgot-password-btn" class="text-blue-600 hover:text-blue-800 text-sm font-medium hover:underline transition" aria-label="Mot de passe oubli√©">
                                            üîë Mot de passe oubli√© ?
                                        </button>
                                    </div>
                                </form>
                                <!-- Formulaire de r√©initialisation (cach√© par d√©faut) -->
                                <div id="reset-password-form" class="hidden mt-6 p-4 bg-orange-50 rounded-xl border border-orange-200">
                                    <h3 class="text-orange-800 font-semibold mb-3">üìß R√©initialiser le mot de passe</h3>
                                    <p class="text-orange-700 text-sm mb-3">Entrez votre email pour recevoir un lien de r√©initialisation</p>
                                    <input type="email" id="reset-email" class="w-full px-4 py-3 border border-orange-200 rounded-xl bg-white shadow-sm focus:ring-2 focus:ring-orange-400 focus:border-orange-400 transition mb-3" placeholder="votre@email.com">
                                    <div class="flex gap-2">
                                        <button type="button" id="send-reset-btn" class="flex-1 bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-xl font-semibold transition" aria-label="Envoyer le lien de r√©initialisation">
                                            Envoyer le lien
                                        </button>
                                        <button type="button" id="cancel-reset-btn" class="px-4 bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 rounded-xl font-semibold transition" aria-label="Annuler la r√©initialisation">
                                            Annuler
                                        </button>
                                    </div>
                                    <p id="reset-message" class="text-center hidden mt-3 text-sm" aria-live="polite"></p>
                                </div>
                                <div class="mt-6 p-4 bg-blue-50 rounded-xl text-center">
                                    <p class="text-blue-800 text-sm">üîê Connexion s√©curis√©e via Firebase</p>
                                </div>
                            </div>
                        </section>
                    </main>
                </div>
                
                <!-- Navigation -->
                <nav class="flex-1 py-6 overflow-y-auto scrollbar-thin">
                    <ul class="space-y-1 px-3">
                        <li>
                            <a href="#" data-module="dashboard" class="nav-link active flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">dashboard</span>
                                <span class="font-medium">Tableau de bord</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="messages" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">inbox</span>
                                <span class="font-medium">Messages</span>
                                <span id="messages-badge" class="ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full badge-pulse hidden">0</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="catalogue" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">inventory_2</span>
                                <span class="font-medium">Catalogue</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="carousel" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">view_carousel</span>
                                <span class="font-medium">Carrousel</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="temoignages" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">format_quote</span>
                                <span class="font-medium">T√©moignages</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="faq" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">help_outline</span>
                                <span class="font-medium">FAQ</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="media" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">photo_library</span>
                                <span class="font-medium">M√©dias</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="settings" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">settings</span>
                                <span class="font-medium">Param√®tres</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="seo" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">search</span>
                                <span class="font-medium">SEO</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="rdv" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">event</span>
                                <span class="font-medium">Rendez-vous</span>
                                <span id="rdv-badge" class="ml-auto bg-green-500 text-white text-xs px-2 py-1 rounded-full hidden">0</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="analytics" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">analytics</span>
                                <span class="font-medium">Analytics</span>
                            </a>
                        </li>
                        
                        <!-- S√©parateur Gestion Entreprise -->
                        <li class="pt-4 pb-2">
                            <p class="px-4 text-xs font-semibold text-blue-200 uppercase tracking-wider">Gestion Entreprise</p>
                        </li>
                        <li>
                            <a href="#" data-module="finances" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">account_balance</span>
                                <span class="font-medium">Finances</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="clients" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">people</span>
                                <span class="font-medium">CRM Clients</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="projets" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">engineering</span>
                                <span class="font-medium">Projets/Chantiers</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="employes" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">badge</span>
                                <span class="font-medium">Employ√©s</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="stocks" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">inventory</span>
                                <span class="font-medium">Stocks</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="documents" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">folder</span>
                                <span class="font-medium">Documents</span>
                            </a>
                        </li>
                        
                        <!-- S√©parateur Syst√®me -->
                        <li class="pt-4 pb-2">
                            <p class="px-4 text-xs font-semibold text-blue-200 uppercase tracking-wider">Syst√®me</p>
                        </li>
                        <li>
                            <a href="#" data-module="updates" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">system_update</span>
                                <span class="font-medium">Mises √† jour</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="maintenance" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">engineering</span>
                                <span class="font-medium">Maintenance</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="backup" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">backup</span>
                                <span class="font-medium">Sauvegarde</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" data-module="security" class="nav-link flex items-center px-4 py-3 rounded-xl text-white/90 hover:text-white">
                                <span class="material-icons mr-3">security</span>
                                <span class="font-medium">S√©curit√©</span>
                            </a>
                        </li>
                    </ul>
                </nav>
                
                <!-- D√©connexion -->
                <div class="p-4 border-t border-white/10">
                    <button id="logout-btn" class="w-full flex items-center justify-center px-4 py-3 bg-red-500/20 hover:bg-red-500/30 rounded-xl text-red-200 hover:text-white transition">
                        <span class="material-icons mr-2">logout</span>
                        <span class="font-medium">D√©connexion</span>
                    </button>
                </div>
            </aside>

            <!-- Contenu principal -->
            <main id="dashboard-main" class="flex-1 ml-0 lg:ml-72 p-4 lg:p-8 pt-20 lg:pt-8" style="display:none;">
                <!-- Bouton de migration Firebase -->
                <div id="firebase-migration-bar" class="w-full flex justify-center items-center py-2 bg-yellow-400 text-blue-900 font-bold animate__animated animate__fadeInUp" style="display:none;z-index:1000;">
                    <span class="mr-4">Migration des donn√©es locales vers Firebase disponible.</span>
                    <button id="migrate-firebase-btn" class="px-4 py-2 bg-blue-900 text-yellow-400 rounded hover:bg-blue-700 transition">Migrer vers Firebase</button>
                </div>
                
                <!-- Header -->
                <header class="flex flex-col lg:flex-row items-start lg:items-center justify-between mb-8 gap-4">
                    <div>
                        <h1 id="page-title" class="text-2xl lg:text-3xl font-bold text-white">Tableau de bord</h1>
                        <p class="text-gray-400 mt-1 text-sm lg:text-base">Bienvenue dans votre espace d'administration</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-gray-400 hidden lg:inline" id="current-date"></span>
                        <a href="index.html" target="_blank" class="flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-xl text-white font-semibold transition shadow-lg text-sm lg:text-base">
                            <span class="material-icons mr-2">visibility</span>Voir le site
                        </a>
                    </div>
                </header>

                <!-- MODULE: Dashboard -->
                <section id="module-dashboard" class="module-section active">
                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="stat-card glass-card rounded-2xl p-6 shadow-xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm font-medium">Messages</p>
                                    <p class="text-3xl font-bold text-blue-900" id="stat-messages">0</p>
                                </div>
                                <div class="w-14 h-14 bg-blue-100 rounded-2xl flex items-center justify-center">
                                    <span class="material-icons text-blue-600 text-2xl">mail</span>
                                </div>
                            </div>
                            <p class="text-green-500 text-sm mt-3"><span class="material-icons text-sm align-middle">trending_up</span> Nouveaux aujourd'hui</p>
                        </div>
                        
                        <div class="stat-card glass-card rounded-2xl p-6 shadow-xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm font-medium">Annonces</p>
                                    <p class="text-3xl font-bold text-green-700" id="stat-annonces">0</p>
                                </div>
                                <div class="w-14 h-14 bg-green-100 rounded-2xl flex items-center justify-center">
                                    <span class="material-icons text-green-600 text-2xl">inventory_2</span>
                                </div>
                            </div>
                            <p class="text-gray-400 text-sm mt-3">Publi√©es sur le site</p>
                        </div>
                        
                        <div class="stat-card glass-card rounded-2xl p-6 shadow-xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm font-medium">T√©moignages</p>
                                    <p class="text-3xl font-bold text-purple-700" id="stat-temoignages">0</p>
                                </div>
                                <div class="w-14 h-14 bg-purple-100 rounded-2xl flex items-center justify-center">
                                    <span class="material-icons text-purple-600 text-2xl">format_quote</span>
                                </div>
                            </div>
                            <p class="text-gray-400 text-sm mt-3">Clients satisfaits</p>
                        </div>
                        
                        <div class="stat-card glass-card rounded-2xl p-6 shadow-xl">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm font-medium">M√©dias</p>
                                    <p class="text-3xl font-bold text-orange-700" id="stat-media">0</p>
                                </div>
                                <div class="w-14 h-14 bg-orange-100 rounded-2xl flex items-center justify-center">
                                    <span class="material-icons text-orange-600 text-2xl">photo_library</span>
                                </div>
                            </div>
                            <p class="text-gray-400 text-sm mt-3">Images et vid√©os</p>
                        </div>
                    </div>

                    <!-- Quick Actions + Recent Messages -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Actions rapides -->
                        <div class="glass-card rounded-2xl p-6 shadow-xl">
                            <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                                <span class="material-icons mr-2 text-blue-600">flash_on</span>Actions rapides
                            </h3>
                            <div class="grid grid-cols-2 gap-4">
                                <button data-goto="catalogue" class="quick-action flex flex-col items-center p-4 bg-blue-50 hover:bg-blue-100 rounded-xl transition">
                                    <span class="material-icons text-blue-600 text-3xl mb-2">add_box</span>
                                    <span class="text-blue-800 font-medium">Nouvelle annonce</span>
                                </button>
                                <button data-goto="temoignages" class="quick-action flex flex-col items-center p-4 bg-green-50 hover:bg-green-100 rounded-xl transition">
                                    <span class="material-icons text-green-600 text-3xl mb-2">person_add</span>
                                    <span class="text-green-800 font-medium">T√©moignage</span>
                                </button>
                                <button data-goto="carousel" class="quick-action flex flex-col items-center p-4 bg-purple-50 hover:bg-purple-100 rounded-xl transition">
                                    <span class="material-icons text-purple-600 text-3xl mb-2">view_carousel</span>
                                    <span class="text-purple-800 font-medium">Modifier slides</span>
                                </button>
                                <button data-goto="settings" class="quick-action flex flex-col items-center p-4 bg-orange-50 hover:bg-orange-100 rounded-xl transition">
                                    <span class="material-icons text-orange-600 text-3xl mb-2">tune</span>
                                    <span class="text-orange-800 font-medium">Param√®tres</span>
                                </button>
                            </div>
                        </div>

                        <!-- Messages r√©cents -->
                        <div class="glass-card rounded-2xl p-6 shadow-xl">
                            <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                                <span class="material-icons mr-2 text-blue-600">mail</span>Messages r√©cents
                            </h3>
                            <div id="recent-messages" class="space-y-3 max-h-64 overflow-y-auto">
                                <p class="text-gray-400 text-center py-8">Aucun message pour le moment</p>
                            </div>
                            <button data-goto="messages" class="mt-4 w-full py-2 text-blue-600 hover:text-blue-800 font-medium transition">Voir tous les messages ‚Üí</button>
                        </div>
                    </div>
                </section>

                <!-- MODULE: Messages -->
                <section id="module-messages" class="module-section">
                    <div class="glass-card rounded-2xl p-6 shadow-xl">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-xl font-bold text-gray-800 flex items-center">
                                <span class="material-icons mr-2 text-blue-600">inbox</span>Bo√Æte de r√©ception
                            </h3>
                            <div class="flex space-x-2">
                                <button id="mark-all-read" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition shadow">
                                    <span class="material-icons align-middle text-sm mr-1">done_all</span>Tout marquer lu
                                </button>
                                <button id="clear-messages" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition shadow">
                                    <span class="material-icons align-middle text-sm mr-1">delete_sweep</span>Vider
                                </button>
                            </div>
                        </div>
                        <div id="messages-list" class="space-y-4">
                            <p class="text-gray-400 text-center py-12">Aucun message re√ßu</p>
                        </div>
                    </div>
                </section>

                <!-- MODULE: Catalogue -->
                <section id="module-catalogue" class="module-section">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-2">
                            <div class="glass-card rounded-2xl p-6 shadow-xl">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-xl font-bold text-gray-800">Annonces publi√©es</h3>
                                    <button onclick="openCatalogueModal()" class="px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-800 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-blue-900 transition shadow-lg">
                                        <span class="material-icons align-middle mr-1 text-sm">add</span>Nouvelle annonce
                                    </button>
                                </div>
                                <div id="catalogue-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                    <p class="text-gray-400 col-span-3 text-center py-8">Aucune annonce</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- MODULE: Carrousel -->
                <section id="module-carousel" class="module-section">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-2">
                            <div class="glass-card rounded-2xl p-6 shadow-xl">
                                <div class="flex items-center justify-between mb-6">
                                    <div>
                                        <h3 class="text-xl font-bold text-gray-800">Slides du carrousel</h3>
                                        <p class="text-gray-500 text-sm">Glissez-d√©posez pour r√©ordonner</p>
                                    </div>
                                    <button onclick="openCarouselModal()" class="px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-xl font-semibold hover:from-purple-700 hover:to-purple-900 transition shadow-lg">
                                        <span class="material-icons align-middle mr-1 text-sm">add</span>Nouveau slide
                                    </button>
                                </div>
                                <div id="carousel-list" class="space-y-4">
                                    <p class="text-gray-400 text-center py-8">Aucun slide configur√©</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- MODULE: T√©moignages -->
                <section id="module-temoignages" class="module-section">
                            <div class="glass-card rounded-2xl p-6 shadow-xl">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-xl font-bold text-gray-800">T√©moignages clients</h3>
                                    <button onclick="openTemoignageModal()" class="px-4 py-2 bg-gradient-to-r from-green-600 to-green-800 text-white rounded-xl font-semibold hover:from-green-700 hover:to-green-900 transition shadow-lg">
                                        <span class="material-icons align-middle mr-1 text-sm">add</span>Nouveau t√©moignage
                                    </button>
                                </div>
                                <div id="temoignages-list" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
                                    <p class="text-gray-400 col-span-3 text-center py-8">Aucun t√©moignage</p>
                                </div>
                            </div>
                </section>

                <!-- MODULE: FAQ -->
                <section id="module-faq" class="module-section">
                            <div class="glass-card rounded-2xl p-6 shadow-xl">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-xl font-bold text-gray-800">Questions fr√©quentes</h3>
                                    <button onclick="openFaqModal()" class="px-4 py-2 bg-blue-600 text-gray-900 rounded-xl font-semibold hover:bg-blue-700 transition shadow-lg">
                                        <span class="material-icons align-middle mr-1 text-sm">add</span>Nouvelle question
                                    </button>
                                </div>
                                <div id="faq-list" class="space-y-4">
                                    <p class="text-gray-400 text-center py-8">Aucune FAQ</p>
                                </div>
                            </div>
                </section>

                <!-- MODULE: M√©dias -->
                <section id="module-media" class="module-section">
                            <div class="glass-card rounded-2xl p-6 shadow-xl">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-xl font-bold text-gray-800">Biblioth√®que de m√©dias</h3>
                                    <button onclick="openMediaModal()" class="px-4 py-2 bg-gradient-to-r from-pink-600 to-rose-600 text-white rounded-xl font-semibold hover:from-pink-700 hover:to-rose-700 transition shadow-lg">
                                        <span class="material-icons align-middle mr-1 text-sm">upload</span>Uploader m√©dia
                                    </button>
                                </div>
                                <div id="media-list" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
                                    <p class="text-gray-400 col-span-6 text-center py-8">Aucun m√©dia</p>
                                </div>
                            </div>
                </section>

                <!-- MODULE: Param√®tres -->
                <section id="module-settings" class="module-section">
                    <div class="space-y-6">
                        <!-- En-t√™te -->
                        <div class="bg-gradient-to-r from-slate-700 to-slate-900 rounded-2xl shadow-lg p-6 text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h3 class="text-2xl font-bold flex items-center">
                                        <span class="material-icons mr-3 text-3xl">settings</span>
                                        Param√®tres du Site
                                    </h3>
                                    <p class="text-slate-300 mt-1">Configurez les informations affich√©es sur le site public</p>
                                </div>
                                <div class="flex gap-2">
                                    <button onclick="previewSettingsChanges()" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 rounded-xl transition flex items-center gap-2 text-white font-semibold shadow-lg">
                                        <span class="material-icons">visibility</span>
                                        Pr√©visualiser
                                    </button>
                                    <button onclick="resetSettingsToDefault()" class="px-4 py-2 bg-red-500 hover:bg-red-600 rounded-xl transition flex items-center gap-2 text-white font-semibold shadow-lg">
                                        <span class="material-icons">restart_alt</span>
                                        R√©initialiser
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Onglets des param√®tres -->
                        <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
                            <div class="flex border-b overflow-x-auto">
                                <button onclick="switchSettingsTab('general')" class="settings-tab active flex-1 px-6 py-4 font-semibold text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition flex items-center justify-center gap-2 whitespace-nowrap" data-tab="general">
                                    <span class="material-icons text-lg">business</span>
                                    Entreprise
                                </button>
                                <button onclick="switchSettingsTab('contact')" class="settings-tab flex-1 px-6 py-4 font-semibold text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition flex items-center justify-center gap-2 whitespace-nowrap" data-tab="contact">
                                    <span class="material-icons text-lg">contact_phone</span>
                                    Contact
                                </button>
                                <button onclick="switchSettingsTab('social')" class="settings-tab flex-1 px-6 py-4 font-semibold text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition flex items-center justify-center gap-2 whitespace-nowrap" data-tab="social">
                                    <span class="material-icons text-lg">share</span>
                                    R√©seaux sociaux
                                </button>
                                <button onclick="switchSettingsTab('appearance')" class="settings-tab flex-1 px-6 py-4 font-semibold text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition flex items-center justify-center gap-2 whitespace-nowrap" data-tab="appearance">
                                    <span class="material-icons text-lg">palette</span>
                                    Apparence
                                </button>
                                <button onclick="switchSettingsTab('legal')" class="settings-tab flex-1 px-6 py-4 font-semibold text-gray-600 hover:text-blue-600 hover:bg-blue-50 transition flex items-center justify-center gap-2 whitespace-nowrap" data-tab="legal">
                                    <span class="material-icons text-lg">gavel</span>
                                    L√©gal
                                </button>
                            </div>

                            <form id="settings-form" class="p-6">
                                <!-- Tab: Entreprise -->
                                <div id="settings-tab-general" class="settings-tab-content">
                                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                        <div class="space-y-4">
                                            <h4 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                                                <span class="material-icons text-blue-600">badge</span>
                                                Identit√© de l'entreprise
                                            </h4>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">Nom de l'entreprise *</label>
                                                <input type="text" id="settings-company" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition" placeholder="KFS BTP IMMO" required>
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">Slogan / Description courte</label>
                                                <input type="text" id="settings-slogan" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="B√¢tir l'avenir au S√©n√©gal">
                                                <p class="text-xs text-gray-500 mt-1">Affich√© dans le footer et les meta descriptions</p>
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">Description compl√®te</label>
                                                <textarea id="settings-description" rows="3" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="Entreprise de BTP et immobilier au S√©n√©gal..."></textarea>
                                            </div>
                                        </div>
                                        <div class="space-y-4">
                                            <h4 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                                                <span class="material-icons text-green-600">schedule</span>
                                                Horaires & Disponibilit√©
                                            </h4>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">Horaires d'ouverture</label>
                                                <input type="text" id="settings-hours" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="Lun-Ven: 8h-18h, Sam: 9h-13h">
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">Jours de fermeture</label>
                                                <input type="text" id="settings-closed" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="Dimanche, jours f√©ri√©s">
                                            </div>
                                            <div class="flex items-center gap-3 p-4 bg-gray-50 rounded-xl">
                                                <input type="checkbox" id="settings-available" class="w-5 h-5 text-blue-600 rounded focus:ring-blue-500">
                                                <label for="settings-available" class="text-gray-700 font-medium">Actuellement disponible pour de nouveaux projets</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Tab: Contact -->
                                <div id="settings-tab-contact" class="settings-tab-content hidden">
                                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                        <div class="space-y-4">
                                            <h4 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                                                <span class="material-icons text-purple-600">phone</span>
                                                T√©l√©phones
                                            </h4>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">T√©l√©phone principal (S√©n√©gal)</label>
                                                <div class="flex">
                                                    <span class="inline-flex items-center px-4 bg-gray-100 border-2 border-r-0 border-gray-200 rounded-l-xl text-gray-600">üá∏üá≥</span>
                                                    <input type="tel" id="settings-phone" class="w-full px-4 py-3 border-2 border-gray-200 rounded-r-xl text-gray-800 focus:border-blue-500 transition" placeholder="+221 78 584 28 71">
                                                </div>
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">T√©l√©phone France</label>
                                                <div class="flex">
                                                    <span class="inline-flex items-center px-4 bg-gray-100 border-2 border-r-0 border-gray-200 rounded-l-xl text-gray-600">üá´üá∑</span>
                                                    <input type="tel" id="settings-phone-france" class="w-full px-4 py-3 border-2 border-gray-200 rounded-r-xl text-gray-800 focus:border-blue-500 transition" placeholder="+33 6 05 84 68 07">
                                                </div>
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">WhatsApp (num√©ro sans espaces ni +)</label>
                                                <div class="flex">
                                                    <span class="inline-flex items-center px-4 bg-green-100 border-2 border-r-0 border-gray-200 rounded-l-xl text-green-600">
                                                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
                                                    </span>
                                                    <input type="text" id="settings-whatsapp" class="w-full px-4 py-3 border-2 border-gray-200 rounded-r-xl text-gray-800 focus:border-blue-500 transition" placeholder="221785842871">
                                                </div>
                                                <p class="text-xs text-gray-500 mt-1">Format: 221XXXXXXXXX (code pays + num√©ro)</p>
                                            </div>
                                        </div>
                                        <div class="space-y-4">
                                            <h4 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                                                <span class="material-icons text-orange-600">location_on</span>
                                                Adresse & Email
                                            </h4>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">Email professionnel</label>
                                                <input type="email" id="settings-email" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="kfsbtpproimmo@gmail.com">
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">Adresse compl√®te</label>
                                                <textarea id="settings-address" rows="2" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="Villa 123 MC, Quartier Medinacoura, Tambacounda"></textarea>
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">Ville</label>
                                                <input type="text" id="settings-city" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="Tambacounda, S√©n√©gal">
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">Lien Google Maps (embed URL)</label>
                                                <input type="url" id="settings-maps" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="https://maps.google.com/...">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Tab: R√©seaux sociaux -->
                                <div id="settings-tab-social" class="settings-tab-content hidden">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <label class="flex items-center gap-2 text-gray-700 font-medium mb-2">
                                                <svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 24 24"><path d="M22 12c0-5.522-4.477-10-10-10S2 6.478 2 12c0 5 3.657 9.127 8.438 9.877v-6.987h-2.54v-2.89h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.242 0-1.632.771-1.632 1.562v1.875h2.773l-.443 2.89h-2.33v6.987C18.343 21.127 22 17 22 12z"/></svg>
                                                Facebook
                                            </label>
                                            <input type="url" id="settings-facebook" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="https://facebook.com/kfsbtp">
                                        </div>
                                        <div>
                                            <label class="flex items-center gap-2 text-gray-700 font-medium mb-2">
                                                <svg class="w-5 h-5 text-pink-600" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>
                                                Instagram
                                            </label>
                                            <input type="url" id="settings-instagram" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="https://instagram.com/kfsbtp">
                                        </div>
                                        <div>
                                            <label class="flex items-center gap-2 text-gray-700 font-medium mb-2">
                                                <svg class="w-5 h-5 text-blue-700" fill="currentColor" viewBox="0 0 24 24"><path d="M19 0h-14c-2.76 0-5 2.24-5 5v14c0 2.76 2.24 5 5 5h14c2.76 0 5-2.24 5-5v-14c0-2.76-2.24-5-5-5zm-11 19h-3v-9h3v9zm-1.5-10.28c-.97 0-1.75-.79-1.75-1.75s.78-1.75 1.75-1.75 1.75.78 1.75 1.75-.78 1.75-1.75 1.75zm13.5 10.28h-3v-4.5c0-1.08-.02-2.47-1.5-2.47-1.5 0-1.73 1.17-1.73 2.39v4.58h-3v-9h2.88v1.23h.04c.4-.75 1.38-1.54 2.84-1.54 3.04 0 3.6 2 3.6 4.59v4.72z"/></svg>
                                                LinkedIn
                                            </label>
                                            <input type="url" id="settings-linkedin" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="https://linkedin.com/company/kfsbtp">
                                        </div>
                                        <div>
                                            <label class="flex items-center gap-2 text-gray-700 font-medium mb-2">
                                                <svg class="w-5 h-5 text-red-600" fill="currentColor" viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
                                                YouTube
                                            </label>
                                            <input type="url" id="settings-youtube" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="https://youtube.com/@kfsbtp">
                                        </div>
                                        <div>
                                            <label class="flex items-center gap-2 text-gray-700 font-medium mb-2">
                                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                                                X (Twitter)
                                            </label>
                                            <input type="url" id="settings-twitter" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="https://x.com/kfsbtp">
                                        </div>
                                        <div>
                                            <label class="flex items-center gap-2 text-gray-700 font-medium mb-2">
                                                <svg class="w-5 h-5 text-black" fill="currentColor" viewBox="0 0 24 24"><path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg>
                                                TikTok
                                            </label>
                                            <input type="url" id="settings-tiktok" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="https://tiktok.com/@kfsbtp">
                                        </div>
                                    </div>
                                </div>

                                <!-- Tab: Apparence -->
                                <div id="settings-tab-appearance" class="settings-tab-content hidden">
                                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                        <div class="space-y-4">
                                            <h4 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                                                <span class="material-icons text-indigo-600">color_lens</span>
                                                Couleurs du site
                                            </h4>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">Couleur principale</label>
                                                <div class="flex gap-2">
                                                    <input type="color" id="settings-color-primary" class="w-16 h-12 rounded-lg cursor-pointer border-2 border-gray-200" value="#1e3a8a">
                                                    <input type="text" id="settings-color-primary-hex" class="flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 font-mono" value="#1e3a8a" readonly>
                                                </div>
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">Couleur secondaire</label>
                                                <div class="flex gap-2">
                                                    <input type="color" id="settings-color-secondary" class="w-16 h-12 rounded-lg cursor-pointer border-2 border-gray-200" value="#facc15">
                                                    <input type="text" id="settings-color-secondary-hex" class="flex-1 px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 font-mono" value="#facc15" readonly>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="space-y-4">
                                            <h4 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                                                <span class="material-icons text-cyan-600">image</span>
                                                Logo & Images
                                            </h4>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">URL du logo</label>
                                                <input type="url" id="settings-logo" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="assets/logo-kfs-btp.jpeg">
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">URL du favicon</label>
                                                <input type="url" id="settings-favicon" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="assets/logo-kfs-btp.jpeg">
                                            </div>
                                            <div class="flex items-center gap-3 p-4 bg-gray-50 rounded-xl">
                                                <input type="checkbox" id="settings-show-whatsapp-btn" class="w-5 h-5 text-green-600 rounded focus:ring-green-500" checked>
                                                <label for="settings-show-whatsapp-btn" class="text-gray-700 font-medium">Afficher le bouton WhatsApp flottant</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Tab: L√©gal -->
                                <div id="settings-tab-legal" class="settings-tab-content hidden">
                                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                        <div class="space-y-4">
                                            <h4 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                                                <span class="material-icons text-amber-600">account_balance</span>
                                                Informations l√©gales
                                            </h4>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">NINEA</label>
                                                <input type="text" id="settings-ninea" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="009468499">
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">RCCM</label>
                                                <input type="text" id="settings-rccm" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="SN TBC 2025 M 1361">
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">Capital social</label>
                                                <input type="text" id="settings-capital" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="1 000 000 FCFA">
                                            </div>
                                        </div>
                                        <div class="space-y-4">
                                            <h4 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                                                <span class="material-icons text-teal-600">verified_user</span>
                                                Propri√©taire / G√©rant
                                            </h4>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">Nom du g√©rant</label>
                                                <input type="text" id="settings-owner" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="M. / Mme ...">
                                            </div>
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">H√©bergeur du site</label>
                                                <input type="text" id="settings-host" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition" placeholder="GitHub Pages / Netlify...">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Boutons de sauvegarde -->
                                <div class="flex flex-col sm:flex-row gap-4 mt-8 pt-6 border-t">
                                    <button type="submit" class="flex-1 bg-gradient-to-r from-blue-600 to-blue-800 text-white py-4 rounded-xl font-bold text-lg hover:from-blue-700 hover:to-blue-900 transition flex items-center justify-center gap-2">
                                        <span class="material-icons">save</span>
                                        Sauvegarder tous les param√®tres
                                    </button>
                                    <button type="button" onclick="testSettingsOnPublic()" class="px-8 py-4 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl font-bold hover:from-green-700 hover:to-green-800 transition flex items-center justify-center gap-2">
                                        <span class="material-icons">open_in_new</span>
                                        Voir le site public
                                    </button>
                                </div>
                            </form>
                        </div>

                        <!-- Aper√ßu en temps r√©el -->
                        <div class="bg-white rounded-2xl shadow-lg p-6">
                            <h4 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                                <span class="material-icons text-purple-600">preview</span>
                                Aper√ßu du footer (site public)
                            </h4>
                            <div id="settings-footer-preview" class="bg-gradient-to-r from-blue-900 to-blue-600 rounded-xl p-6 text-white text-sm">
                                <!-- Pr√©visualisation dynamique -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- MODULE: SEO -->
                <section id="module-seo" class="module-section">
                    <div class="glass-card rounded-2xl p-8 shadow-xl max-w-3xl">
                        <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                            <span class="material-icons mr-2 text-green-600">search</span>Optimisation SEO
                        </h3>
                        <form id="seo-form" class="space-y-6">
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">Google Analytics ID</label>
                                <input type="text" id="seo-analytics" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800" placeholder="G-F0SXNRNGS1">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">Google Search Console</label>
                                <input type="text" id="seo-search-console" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800" placeholder="Code de v√©rification">
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">Meta Description (accueil)</label>
                                <textarea id="seo-description" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800" rows="3" placeholder="Description du site pour Google..."></textarea>
                            </div>
                            <div>
                                <label class="block text-gray-700 font-medium mb-2">Mots-cl√©s</label>
                                <input type="text" id="seo-keywords" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800" placeholder="BTP, S√©n√©gal, construction, immobilier...">
                            </div>
                            <!-- Aper√ßu Google -->
                            <div class="bg-gray-50 p-4 rounded-xl border">
                                <p class="text-sm text-gray-500 mb-2">Aper√ßu Google :</p>
                                <p class="text-blue-700 text-lg font-medium" id="seo-preview-title">Accueil - KFS BTP</p>
                                <p class="text-green-700 text-sm">https://www.kfs-btp.sn</p>
                                <p class="text-gray-600 text-sm" id="seo-preview-desc">Entreprise de BTP au S√©n√©gal...</p>
                            </div>
                            <button type="submit" class="w-full bg-gradient-to-r from-green-600 to-green-800 text-white py-4 rounded-xl font-bold text-lg hover:from-green-700 hover:to-green-900 transition">
                                <span class="material-icons align-middle mr-2">save</span>Sauvegarder SEO
                            </button>
                        </form>
                    </div>
                </section>

                <!-- MODULE: Mises √† jour -->
                <section id="module-updates" class="module-section">
                    <div class="space-y-6">
                        <!-- En-t√™te avec version actuelle -->
                        <div class="bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl shadow-lg p-6 text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h3 class="text-2xl font-bold flex items-center">
                                        <span class="material-icons mr-3 text-3xl">system_update</span>
                                        KFS BTP - Site Web
                                    </h3>
                                    <p class="text-blue-100 mt-1">Gestion des versions et mises √† jour</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm text-blue-200">Version actuelle</p>
                                    <p class="text-3xl font-bold" id="current-version">3.1.0</p>
                                </div>
                            </div>
                        </div>

                        <!-- Statut de mise √† jour -->
                        <div class="bg-white rounded-2xl shadow-lg p-6">
                            <h4 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                <span class="material-icons mr-2 text-green-600">verified</span>
                                Statut du Syst√®me
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="bg-green-50 border border-green-200 rounded-xl p-4 text-center">
                                    <span class="material-icons text-4xl text-green-600">check_circle</span>
                                    <p class="font-semibold text-green-800 mt-2">Site √† jour</p>
                                    <p class="text-sm text-green-600">Derni√®re mise √† jour: 24/01/2026</p>
                                </div>
                                <div class="bg-blue-50 border border-blue-200 rounded-xl p-4 text-center">
                                    <span class="material-icons text-4xl text-blue-600">code</span>
                                    <p class="font-semibold text-blue-800 mt-2">HTML/CSS/JS</p>
                                    <p class="text-sm text-blue-600">Site statique optimis√©</p>
                                </div>
                                <div class="bg-purple-50 border border-purple-200 rounded-xl p-4 text-center">
                                    <span class="material-icons text-4xl text-purple-600">storage</span>
                                    <p class="font-semibold text-purple-800 mt-2">LocalStorage</p>
                                    <p class="text-sm text-purple-600">Donn√©es s√©curis√©es</p>
                                </div>
                            </div>
                        </div>

                        <!-- Changelog -->
                        <div class="bg-white rounded-2xl shadow-lg p-6">
                            <h4 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                <span class="material-icons mr-2 text-indigo-600">history</span>
                                Historique des Versions
                            </h4>
                            <div id="changelog-list" class="space-y-4 max-h-96 overflow-y-auto pr-2">
                                <!-- Version 3.1.0 -->
                                <div class="border-l-4 border-green-500 pl-4 py-2">
                                    <div class="flex items-center justify-between">
                                        <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-bold">v3.1.0</span>
                                        <span class="text-gray-500 text-sm">24 Janvier 2026</span>
                                    </div>
                                    <h5 class="font-semibold text-gray-800 mt-2">üöÄ Module Maintenance & Monitoring</h5>
                                    <ul class="text-sm text-gray-600 mt-2 space-y-1">
                                        <li>‚úÖ Page de maintenance professionnelle</li>
                                        <li>‚úÖ Syst√®me de logs d'erreurs</li>
                                        <li>‚úÖ Module mises √† jour avec changelog</li>
                                        <li>‚úÖ Diagnostic syst√®me int√©gr√©</li>
                                    </ul>
                                </div>
                                
                                <!-- Version 3.0.0 -->
                                <div class="border-l-4 border-blue-500 pl-4 py-2">
                                    <div class="flex items-center justify-between">
                                        <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm font-bold">v3.0.0</span>
                                        <span class="text-gray-500 text-sm">23 Janvier 2026</span>
                                    </div>
                                    <h5 class="font-semibold text-gray-800 mt-2">üé® Optimisation Production</h5>
                                    <ul class="text-sm text-gray-600 mt-2 space-y-1">
                                        <li>‚úÖ Images renomm√©es (SEO-friendly)</li>
                                        <li>‚úÖ URLs unifi√©es (kfs-btp.sn)</li>
                                        <li>‚úÖ Sitemap et robots.txt optimis√©s</li>
                                        <li>‚úÖ PWA manifest corrig√©</li>
                                        <li>‚úÖ Informations de contact mises √† jour</li>
                                    </ul>
                                </div>
                                
                                <!-- Version 2.5.0 -->
                                <div class="border-l-4 border-purple-500 pl-4 py-2">
                                    <div class="flex items-center justify-between">
                                        <span class="bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-sm font-bold">v2.5.0</span>
                                        <span class="text-gray-500 text-sm">20 Janvier 2026</span>
                                    </div>
                                    <h5 class="font-semibold text-gray-800 mt-2">üíº Gestion Entreprise</h5>
                                    <ul class="text-sm text-gray-600 mt-2 space-y-1">
                                        <li>‚úÖ Module Comptabilit√© avanc√©e</li>
                                        <li>‚úÖ CRM Clients int√©gr√©</li>
                                        <li>‚úÖ Gestion des employ√©s</li>
                                        <li>‚úÖ Suivi des projets</li>
                                    </ul>
                                </div>
                                
                                <!-- Version 2.0.0 -->
                                <div class="border-l-4 border-yellow-500 pl-4 py-2">
                                    <div class="flex items-center justify-between">
                                        <span class="bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full text-sm font-bold">v2.0.0</span>
                                        <span class="text-gray-500 text-sm">15 Janvier 2026</span>
                                    </div>
                                    <h5 class="font-semibold text-gray-800 mt-2">üè† Dashboard Admin</h5>
                                    <ul class="text-sm text-gray-600 mt-2 space-y-1">
                                        <li>‚úÖ Interface admin moderne</li>
                                        <li>‚úÖ Gestion du catalogue immobilier</li>
                                        <li>‚úÖ Module t√©moignages</li>
                                        <li>‚úÖ Gestion des messages</li>
                                    </ul>
                                </div>
                                
                                <!-- Version 1.0.0 -->
                                <div class="border-l-4 border-gray-400 pl-4 py-2">
                                    <div class="flex items-center justify-between">
                                        <span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm font-bold">v1.0.0</span>
                                        <span class="text-gray-500 text-sm">10 Janvier 2026</span>
                                    </div>
                                    <h5 class="font-semibold text-gray-800 mt-2">üéâ Lancement Initial</h5>
                                    <ul class="text-sm text-gray-600 mt-2 space-y-1">
                                        <li>‚úÖ Site vitrine KFS BTP</li>
                                        <li>‚úÖ Pages services (vente, location, r√©novation)</li>
                                        <li>‚úÖ Formulaire de contact</li>
                                        <li>‚úÖ Design responsive Tailwind CSS</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Notes de mise √† jour -->
                        <div class="bg-white rounded-2xl shadow-lg p-6">
                            <h4 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                <span class="material-icons mr-2 text-orange-600">edit_note</span>
                                Ajouter une Note de Version
                            </h4>
                            <form id="update-note-form" class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Num√©ro de version</label>
                                        <input type="text" id="update-version" class="w-full px-4 py-2 border border-gray-200 rounded-xl" placeholder="ex: 3.2.0" required>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Type de mise √† jour</label>
                                        <select id="update-type" class="w-full px-4 py-2 border border-gray-200 rounded-xl">
                                            <option value="feature">üöÄ Nouvelle fonctionnalit√©</option>
                                            <option value="fix">üêõ Correction de bug</option>
                                            <option value="improvement">‚ö° Am√©lioration</option>
                                            <option value="security">üîí S√©curit√©</option>
                                        </select>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Titre</label>
                                    <input type="text" id="update-title" class="w-full px-4 py-2 border border-gray-200 rounded-xl" placeholder="Titre de la mise √† jour" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">D√©tails (un par ligne)</label>
                                    <textarea id="update-details" rows="4" class="w-full px-4 py-2 border border-gray-200 rounded-xl" placeholder="- Fonctionnalit√© 1&#10;- Fonctionnalit√© 2&#10;- Correction bug X"></textarea>
                                </div>
                                <button type="submit" class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-xl font-semibold hover:from-indigo-700 hover:to-purple-700 transition">
                                    <span class="material-icons align-middle mr-2">add</span>
                                    Enregistrer la mise √† jour
                                </button>
                            </form>
                        </div>

                        <!-- Actions rapides -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white rounded-2xl shadow-lg p-6">
                                <h4 class="font-bold text-gray-800 mb-3 flex items-center">
                                    <span class="material-icons mr-2 text-blue-600">refresh</span>
                                    Vider le Cache
                                </h4>
                                <p class="text-gray-600 text-sm mb-4">Force le rechargement des ressources pour voir les derni√®res modifications</p>
                                <button onclick="clearAllCaches()" class="w-full bg-blue-500 text-white py-3 rounded-xl font-semibold hover:bg-blue-600 transition shadow">
                                    Vider le cache navigateur
                                </button>
                            </div>
                            <div class="bg-white rounded-2xl shadow-lg p-6">
                                <h4 class="font-bold text-gray-800 mb-3 flex items-center">
                                    <span class="material-icons mr-2 text-green-600">cloud_sync</span>
                                    Service Worker
                                </h4>
                                <p class="text-gray-600 text-sm mb-4">Met √† jour le service worker pour la derni√®re version du site</p>
                                <button onclick="updateServiceWorker()" class="w-full bg-green-500 text-white py-3 rounded-xl font-semibold hover:bg-green-600 transition shadow">
                                    Mettre √† jour le SW
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- MODULE: Maintenance -->
                <section id="module-maintenance" class="module-section">
                    <div id="maintenance-content" class="space-y-6">
                        <!-- √âtat du site -->
                        <div class="bg-white rounded-2xl shadow-lg p-6">
                            <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                <span class="material-icons mr-2 text-blue-600">monitor_heart</span>
                                √âtat du Site
                            </h3>
                            <div id="health-status" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="bg-green-50 border border-green-200 rounded-xl p-4 text-center">
                                    <div class="text-3xl mb-2">üü¢</div>
                                    <p class="font-semibold text-green-800">Site en ligne</p>
                                    <p class="text-sm text-green-600">Op√©rationnel</p>
                                </div>
                                <div class="bg-blue-50 border border-blue-200 rounded-xl p-4 text-center">
                                    <div class="text-3xl mb-2">üíæ</div>
                                    <p class="font-semibold text-blue-800">LocalStorage</p>
                                    <p class="text-sm text-blue-600" id="storage-usage">Calcul...</p>
                                </div>
                                <div class="bg-purple-50 border border-purple-200 rounded-xl p-4 text-center">
                                    <div class="text-3xl mb-2">‚ö°</div>
                                    <p class="font-semibold text-purple-800">Service Worker</p>
                                    <p class="text-sm text-purple-600" id="sw-status">V√©rification...</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Mode Maintenance -->
                        <div class="bg-white rounded-2xl shadow-lg p-6">
                            <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                <span class="material-icons mr-2 text-yellow-600">engineering</span>
                                Mode Maintenance
                            </h3>
                            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl">
                                <div>
                                    <p class="font-semibold text-gray-800">Activer le mode maintenance</p>
                                    <p class="text-sm text-gray-500">Les visiteurs verront une page d'attente</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="maintenance-toggle" class="sr-only peer">
                                    <div class="w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-yellow-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-blue-600"></div>
                                </label>
                            </div>
                            <div id="maintenance-options" class="hidden mt-4 space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Message personnalis√©</label>
                                    <textarea id="maintenance-message" rows="2" class="w-full px-4 py-2 border border-gray-200 rounded-xl" placeholder="Nous effectuons une maintenance..."></textarea>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Dur√©e estim√©e (heures)</label>
                                    <input type="number" id="maintenance-duration" class="w-full px-4 py-2 border border-gray-200 rounded-xl" value="2" min="1" max="48">
                                </div>
                                <button onclick="activateMaintenance()" class="w-full bg-amber-600 hover:bg-amber-700 text-white font-semibold py-3 rounded-xl transition shadow-lg">
                                    Appliquer le mode maintenance
                                </button>
                            </div>
                        </div>
                        
                        <!-- Logs d'erreurs -->
                        <div class="bg-white rounded-2xl shadow-lg p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-bold text-gray-800 flex items-center">
                                    <span class="material-icons mr-2 text-red-600">bug_report</span>
                                    Logs d'Erreurs
                                </h3>
                                <div class="flex gap-2">
                                    <button onclick="refreshErrorLogs()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition shadow" title="Actualiser">
                                        <span class="material-icons text-sm">refresh</span>
                                    </button>
                                    <button onclick="exportErrorLogs()" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition shadow" title="Exporter">
                                        <span class="material-icons text-sm">download</span>
                                    </button>
                                    <button onclick="clearErrorLogs()" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition shadow" title="Supprimer">
                                        <span class="material-icons text-sm">delete</span>
                                    </button>
                                </div>
                            </div>
                            <div id="error-logs-list" class="space-y-2 max-h-96 overflow-y-auto">
                                <p class="text-gray-500 text-center py-8">Aucune erreur enregistr√©e ‚úÖ</p>
                            </div>
                        </div>
                        
                        <!-- Actions de d√©pannage -->
                        <div class="bg-white rounded-2xl shadow-lg p-6">
                            <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                <span class="material-icons mr-2 text-indigo-600">build</span>
                                Actions de D√©pannage
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <button onclick="clearCache()" class="flex items-center justify-center gap-3 p-4 bg-blue-50 hover:bg-blue-100 rounded-xl transition">
                                    <span class="material-icons text-blue-600">cached</span>
                                    <div class="text-left">
                                        <p class="font-semibold text-gray-800">Vider le cache</p>
                                        <p class="text-sm text-gray-500">Service Worker et caches</p>
                                    </div>
                                </button>
                                <button onclick="reloadServiceWorker()" class="flex items-center justify-center gap-3 p-4 bg-purple-50 hover:bg-purple-100 rounded-xl transition">
                                    <span class="material-icons text-purple-600">sync</span>
                                    <div class="text-left">
                                        <p class="font-semibold text-gray-800">Recharger SW</p>
                                        <p class="text-sm text-gray-500">Mettre √† jour le Service Worker</p>
                                    </div>
                                </button>
                                <button onclick="testConnectivity()" class="flex items-center justify-center gap-3 p-4 bg-green-50 hover:bg-green-100 rounded-xl transition">
                                    <span class="material-icons text-green-600">wifi</span>
                                    <div class="text-left">
                                        <p class="font-semibold text-gray-800">Test connectivit√©</p>
                                        <p class="text-sm text-gray-500">V√©rifier la connexion</p>
                                    </div>
                                </button>
                                <button onclick="runDiagnostics()" class="flex items-center justify-center gap-3 p-4 bg-amber-50 hover:bg-amber-100 rounded-xl transition">
                                    <span class="material-icons text-amber-600">troubleshoot</span>
                                    <div class="text-left">
                                        <p class="font-semibold text-gray-800">Diagnostic complet</p>
                                        <p class="text-sm text-gray-500">Analyser tout le syst√®me</p>
                                    </div>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Lien vers la page de maintenance -->
                        <div class="bg-gradient-to-r from-amber-500 to-orange-600 rounded-2xl shadow-lg p-6 text-white">
                            <h3 class="text-xl font-bold mb-2 flex items-center">
                                <span class="material-icons mr-2">preview</span>
                                Pr√©visualiser la page de maintenance
                            </h3>
                            <p class="text-amber-100 mb-4">Voir ce que les visiteurs verront pendant la maintenance</p>
                            <a href="maintenance.html" target="_blank" class="inline-flex items-center px-6 py-3 bg-blue-500 text-amber-900 font-bold rounded-xl hover:bg-blue-400 transition shadow-lg">
                                <span class="material-icons mr-2">open_in_new</span>
                                Ouvrir maintenance.html
                            </a>
                        </div>
                    </div>
                </section>

                <!-- MODULE: Sauvegarde -->
                <section id="module-backup" class="module-section">
                    <div class="glass-card rounded-2xl p-8 shadow-xl max-w-2xl">
                        <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                            <span class="material-icons mr-2 text-blue-600">backup</span>Sauvegarde & Restauration
                        </h3>
                        <div class="space-y-6">
                            <div class="p-6 bg-blue-50 rounded-xl border border-blue-200">
                                <h4 class="font-semibold text-blue-800 mb-3">Exporter les donn√©es</h4>
                                <p class="text-blue-600 text-sm mb-4">T√©l√©chargez une sauvegarde compl√®te de vos donn√©es (annonces, t√©moignages, param√®tres...)</p>
                                <button id="backup-export" class="px-6 py-3 bg-blue-600 text-white rounded-xl font-semibold hover:bg-blue-700 transition">
                                    <span class="material-icons align-middle mr-1">download</span>T√©l√©charger la sauvegarde
                                </button>
                            </div>
                            <div class="p-6 bg-green-50 rounded-xl border border-green-200">
                                <h4 class="font-semibold text-green-800 mb-3">Importer des donn√©es</h4>
                                <p class="text-green-600 text-sm mb-4">Restaurez vos donn√©es √† partir d'un fichier de sauvegarde</p>
                                <input type="file" id="backup-import" accept=".json" class="mb-3">
                                <p id="backup-message" class="text-sm"></p>
                            </div>
                            <div class="p-6 bg-red-50 rounded-xl border border-red-200">
                                <h4 class="font-semibold text-red-800 mb-3">R√©initialiser</h4>
                                <p class="text-red-600 text-sm mb-4">‚ö†Ô∏è Attention : cette action supprimera toutes vos donn√©es</p>
                                <button id="backup-reset" class="px-6 py-3 bg-red-600 text-white rounded-xl font-semibold hover:bg-red-700 transition">
                                    <span class="material-icons align-middle mr-1">delete_forever</span>Tout supprimer
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- MODULE: S√©curit√© -->
                <section id="module-security" class="module-section">
                    
                    <!-- En-t√™te -->
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
                        <div class="flex items-center">
                            <div class="w-14 h-14 bg-gradient-to-br from-red-600 to-red-800 rounded-2xl flex items-center justify-center mr-4 shadow-lg">
                                <span class="material-icons text-white text-2xl">shield</span>
                            </div>
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800">Centre de S√©curit√©</h2>
                                <p class="text-gray-500">Protection & Gestion des acc√®s - KFS BTP IMMO</p>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="runSecurityAudit()" class="px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-blue-800 transition shadow-lg flex items-center gap-2">
                                <span class="material-icons">fact_check</span> Audit s√©curit√©
                            </button>
                            <button onclick="openEmployeeAccessModal()" class="px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl font-semibold hover:from-green-700 hover:to-green-800 transition shadow-lg flex items-center gap-2">
                                <span class="material-icons">person_add</span> Nouvel acc√®s
                            </button>
                        </div>
                    </div>
                    
                    <!-- Tableau de bord s√©curit√© -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                        <div class="glass-card rounded-2xl p-5 shadow-lg border-l-4 border-green-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm font-medium">Statut s√©curit√©</p>
                                    <p class="text-xl font-bold text-green-600" id="sec-status">S√©curis√©</p>
                                    <p class="text-xs text-green-500 mt-1">Derni√®re v√©rif: Aujourd'hui</p>
                                </div>
                                <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                                    <span class="material-icons text-green-600">verified_user</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-card rounded-2xl p-5 shadow-lg border-l-4 border-blue-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm font-medium">Utilisateurs actifs</p>
                                    <p class="text-xl font-bold text-blue-600" id="sec-users-count">1</p>
                                    <p class="text-xs text-gray-500 mt-1" id="sec-users-detail">1 admin, 0 employ√©s</p>
                                </div>
                                <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                                    <span class="material-icons text-blue-600">group</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-card rounded-2xl p-5 shadow-lg border-l-4 border-yellow-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm font-medium">Connexions (7j)</p>
                                    <p class="text-xl font-bold text-yellow-600" id="sec-logins">0</p>
                                    <p class="text-xs text-gray-500 mt-1" id="sec-last-login">-</p>
                                </div>
                                <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center">
                                    <span class="material-icons text-yellow-600">login</span>
                                </div>
                            </div>
                        </div>
                        <div class="glass-card rounded-2xl p-5 shadow-lg border-l-4 border-red-500">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm font-medium">Alertes</p>
                                    <p class="text-xl font-bold text-red-600" id="sec-alerts">0</p>
                                    <p class="text-xs text-red-500 mt-1">Tentatives √©chou√©es</p>
                                </div>
                                <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center">
                                    <span class="material-icons text-red-600">warning</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Onglets de s√©curit√© -->
                    <div class="glass-card rounded-2xl shadow-lg overflow-hidden mb-6">
                        <div class="flex border-b border-gray-200 bg-gray-50">
                            <button onclick="showSecurityTab('users')" class="security-tab active flex-1 px-6 py-4 text-sm font-semibold transition flex items-center justify-center gap-2" data-tab="users">
                                <span class="material-icons text-lg">manage_accounts</span> Gestion des acc√®s
                            </button>
                            <button onclick="showSecurityTab('password')" class="security-tab flex-1 px-6 py-4 text-sm font-semibold transition flex items-center justify-center gap-2" data-tab="password">
                                <span class="material-icons text-lg">lock</span> Mot de passe admin
                            </button>
                            <button onclick="showSecurityTab('logs')" class="security-tab flex-1 px-6 py-4 text-sm font-semibold transition flex items-center justify-center gap-2" data-tab="logs">
                                <span class="material-icons text-lg">history</span> Journal d'activit√©
                            </button>
                            <button onclick="showSecurityTab('settings')" class="security-tab flex-1 px-6 py-4 text-sm font-semibold transition flex items-center justify-center gap-2" data-tab="settings">
                                <span class="material-icons text-lg">tune</span> Param√®tres
                            </button>
                        </div>
                        
                        <!-- TAB: Gestion des acc√®s employ√©s -->
                        <div id="security-tab-users" class="security-tab-content p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                                    <span class="material-icons text-blue-600">badge</span>
                                    Comptes utilisateurs
                                </h3>
                                <div class="flex gap-2">
                                    <input type="text" id="sec-search-user" placeholder="Rechercher..." class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800 text-sm">
                                    <button onclick="openEmployeeAccessModal()" class="px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition flex items-center gap-2">
                                        <span class="material-icons text-sm">add</span> Ajouter
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Liste des utilisateurs -->
                            <div id="sec-users-list" class="space-y-3">
                                <!-- Rempli dynamiquement -->
                            </div>
                            
                            <!-- L√©gende des permissions -->
                            <div class="mt-6 p-4 bg-gray-50 rounded-xl">
                                <h4 class="font-semibold text-gray-700 mb-3 flex items-center gap-2">
                                    <span class="material-icons text-sm">info</span> L√©gende des modules
                                </h4>
                                <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2 text-xs">
                                    <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded">üìä Dashboard</span>
                                    <span class="px-2 py-1 bg-green-100 text-green-800 rounded">üí∞ Finances</span>
                                    <span class="px-2 py-1 bg-purple-100 text-purple-800 rounded">üë• Clients</span>
                                    <span class="px-2 py-1 bg-orange-100 text-orange-800 rounded">üèóÔ∏è Projets</span>
                                    <span class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded">üëî Employ√©s</span>
                                    <span class="px-2 py-1 bg-red-100 text-red-800 rounded">üì¶ Stocks</span>
                                    <span class="px-2 py-1 bg-indigo-100 text-indigo-800 rounded">üìÑ Documents</span>
                                    <span class="px-2 py-1 bg-pink-100 text-pink-800 rounded">üìÖ RDV</span>
                                    <span class="px-2 py-1 bg-cyan-100 text-cyan-800 rounded">üìß Messages</span>
                                    <span class="px-2 py-1 bg-gray-200 text-gray-800 rounded">üè† Catalogue</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- TAB: Mot de passe admin -->
                        <div id="security-tab-password" class="security-tab-content hidden p-6">
                            <div class="max-w-xl mx-auto">
                                <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100 mb-6">
                                    <h3 class="text-lg font-bold text-gray-800 mb-2 flex items-center gap-2">
                                        <span class="material-icons text-blue-600">admin_panel_settings</span>
                                        Compte Administrateur Principal
                                    </h3>
                                    <p class="text-gray-600 text-sm">Le compte administrateur a un acc√®s complet √† tous les modules. Utilisez un mot de passe fort et unique.</p>
                                </div>
                                
                                <form id="security-form" class="space-y-5">
                                    <div>
                                        <label class="block text-gray-700 font-medium mb-2">Mot de passe actuel</label>
                                        <div class="relative">
                                            <input type="password" id="security-current-password" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 pr-12" required>
                                            <button type="button" onclick="togglePasswordVisibility('security-current-password')" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700">
                                                <span class="material-icons">visibility</span>
                                            </button>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-gray-700 font-medium mb-2">Nouveau mot de passe</label>
                                        <div class="relative">
                                            <input type="password" id="security-password" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 pr-12" minlength="8" required>
                                            <button type="button" onclick="togglePasswordVisibility('security-password')" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700">
                                                <span class="material-icons">visibility</span>
                                            </button>
                                        </div>
                                        <div id="password-strength" class="mt-2">
                                            <div class="flex gap-1 mb-1">
                                                <div class="h-1 flex-1 bg-gray-200 rounded" id="strength-1"></div>
                                                <div class="h-1 flex-1 bg-gray-200 rounded" id="strength-2"></div>
                                                <div class="h-1 flex-1 bg-gray-200 rounded" id="strength-3"></div>
                                                <div class="h-1 flex-1 bg-gray-200 rounded" id="strength-4"></div>
                                            </div>
                                            <p class="text-xs text-gray-500" id="strength-text">Min. 8 caract√®res, majuscule, chiffre, caract√®re sp√©cial</p>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-gray-700 font-medium mb-2">Confirmer le nouveau mot de passe</label>
                                        <div class="relative">
                                            <input type="password" id="security-password-confirm" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 pr-12" minlength="8" required>
                                            <button type="button" onclick="togglePasswordVisibility('security-password-confirm')" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700">
                                                <span class="material-icons">visibility</span>
                                            </button>
                                        </div>
                                    </div>
                                    <p id="security-message" class="text-sm"></p>
                                    <button type="submit" class="w-full bg-gradient-to-r from-blue-600 to-blue-800 text-white py-4 rounded-xl font-bold hover:from-blue-700 hover:to-blue-900 transition flex items-center justify-center gap-2">
                                        <span class="material-icons">lock</span>Mettre √† jour le mot de passe
                                    </button>
                                </form>
                                
                                <div class="mt-6 pt-6 border-t">
                                    <div class="bg-red-50 rounded-xl p-4 border border-red-200">
                                        <h4 class="font-semibold text-red-800 mb-2 flex items-center gap-2">
                                            <span class="material-icons text-sm">warning</span> Zone dangereuse
                                        </h4>
                                        <p class="text-sm text-red-700 mb-3">R√©initialiser le mot de passe au d√©faut. √Ä utiliser uniquement en cas d'urgence.</p>
                                        <button id="security-reset" class="w-full bg-red-500 text-white py-3 rounded-xl font-semibold hover:bg-red-600 transition shadow">
                                            R√©initialiser √† "admin123"
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- TAB: Journal d'activit√© -->
                        <div id="security-tab-logs" class="security-tab-content hidden p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                                    <span class="material-icons text-purple-600">timeline</span>
                                    Historique des connexions et actions
                                </h3>
                                <div class="flex gap-2">
                                    <select id="sec-log-filter" class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800 text-sm">
                                        <option value="all">Tous les √©v√©nements</option>
                                        <option value="login">Connexions</option>
                                        <option value="logout">D√©connexions</option>
                                        <option value="failed">√âchecs</option>
                                        <option value="action">Actions</option>
                                    </select>
                                    <button onclick="clearSecurityLogs()" class="px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition text-sm shadow">
                                        Effacer les logs
                                    </button>
                                    <button onclick="exportSecurityLogs()" class="px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition text-sm shadow">
                                        Exporter
                                    </button>
                                </div>
                            </div>
                            
                            <div id="sec-logs-list" class="space-y-2 max-h-[500px] overflow-y-auto">
                                <!-- Rempli dynamiquement -->
                            </div>
                        </div>
                        
                        <!-- TAB: Param√®tres de s√©curit√© -->
                        <div id="security-tab-settings" class="security-tab-content hidden p-6">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <!-- Param√®tres de session -->
                                <div class="bg-white rounded-xl p-5 border border-gray-100">
                                    <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                        <span class="material-icons text-blue-600">timer</span>
                                        Sessions & Timeout
                                    </h4>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-gray-700 text-sm font-medium mb-2">Dur√©e de session (minutes)</label>
                                            <select id="sec-session-timeout" class="w-full px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                                <option value="15">15 minutes</option>
                                                <option value="30" selected>30 minutes</option>
                                                <option value="60">1 heure</option>
                                                <option value="120">2 heures</option>
                                                <option value="480">8 heures</option>
                                            </select>
                                        </div>
                                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-xl">
                                            <div>
                                                <p class="font-medium text-gray-800">D√©connexion automatique</p>
                                                <p class="text-xs text-gray-500">Se d√©connecter apr√®s inactivit√©</p>
                                            </div>
                                            <label class="relative inline-flex items-center cursor-pointer">
                                                <input type="checkbox" id="sec-auto-logout" class="sr-only peer" checked>
                                                <div class="w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Param√®tres de connexion -->
                                <div class="bg-white rounded-xl p-5 border border-gray-100">
                                    <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                        <span class="material-icons text-red-600">gpp_maybe</span>
                                        Protection contre les attaques
                                    </h4>
                                    <div class="space-y-4">
                                        <div>
                                            <label class="block text-gray-700 text-sm font-medium mb-2">Tentatives avant blocage</label>
                                            <select id="sec-max-attempts" class="w-full px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                                <option value="3">3 tentatives</option>
                                                <option value="5" selected>5 tentatives</option>
                                                <option value="10">10 tentatives</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-gray-700 text-sm font-medium mb-2">Dur√©e de blocage (minutes)</label>
                                            <select id="sec-lockout-duration" class="w-full px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                                <option value="5">5 minutes</option>
                                                <option value="15" selected>15 minutes</option>
                                                <option value="30">30 minutes</option>
                                                <option value="60">1 heure</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Notifications de s√©curit√© -->
                                <div class="bg-white rounded-xl p-5 border border-gray-100">
                                    <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                        <span class="material-icons text-yellow-600">notifications_active</span>
                                        Alertes de s√©curit√©
                                    </h4>
                                    <div class="space-y-3">
                                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-xl">
                                            <div>
                                                <p class="font-medium text-gray-800">Connexions √©chou√©es</p>
                                                <p class="text-xs text-gray-500">Alerter apr√®s 3 √©checs</p>
                                            </div>
                                            <label class="relative inline-flex items-center cursor-pointer">
                                                <input type="checkbox" id="sec-alert-failed" class="sr-only peer" checked>
                                                <div class="w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-yellow-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                            </label>
                                        </div>
                                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-xl">
                                            <div>
                                                <p class="font-medium text-gray-800">Nouvelle connexion</p>
                                                <p class="text-xs text-gray-500">Notifier √† chaque connexion</p>
                                            </div>
                                            <label class="relative inline-flex items-center cursor-pointer">
                                                <input type="checkbox" id="sec-alert-login" class="sr-only peer">
                                                <div class="w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-yellow-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                            </label>
                                        </div>
                                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-xl">
                                            <div>
                                                <p class="font-medium text-gray-800">Modification de donn√©es</p>
                                                <p class="text-xs text-gray-500">Alerter sur suppressions</p>
                                            </div>
                                            <label class="relative inline-flex items-center cursor-pointer">
                                                <input type="checkbox" id="sec-alert-delete" class="sr-only peer" checked>
                                                <div class="w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-yellow-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Politique de mot de passe -->
                                <div class="bg-white rounded-xl p-5 border border-gray-100">
                                    <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                        <span class="material-icons text-green-600">password</span>
                                        Politique de mot de passe
                                    </h4>
                                    <div class="space-y-3">
                                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-xl">
                                            <div>
                                                <p class="font-medium text-gray-800">Longueur minimale: 8</p>
                                            </div>
                                            <span class="material-icons text-green-600">check_circle</span>
                                        </div>
                                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-xl">
                                            <div>
                                                <p class="font-medium text-gray-800">Majuscule requise</p>
                                            </div>
                                            <label class="relative inline-flex items-center cursor-pointer">
                                                <input type="checkbox" id="sec-require-uppercase" class="sr-only peer" checked>
                                                <div class="w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-500"></div>
                                            </label>
                                        </div>
                                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-xl">
                                            <div>
                                                <p class="font-medium text-gray-800">Chiffre requis</p>
                                            </div>
                                            <label class="relative inline-flex items-center cursor-pointer">
                                                <input type="checkbox" id="sec-require-number" class="sr-only peer" checked>
                                                <div class="w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-500"></div>
                                            </label>
                                        </div>
                                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-xl">
                                            <div>
                                                <p class="font-medium text-gray-800">Caract√®re sp√©cial requis</p>
                                            </div>
                                            <label class="relative inline-flex items-center cursor-pointer">
                                                <input type="checkbox" id="sec-require-special" class="sr-only peer">
                                                <div class="w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-500"></div>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-6 flex justify-end">
                                <button onclick="saveSecuritySettings()" class="px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-blue-800 transition shadow-lg flex items-center gap-2">
                                    <span class="material-icons">save</span> Enregistrer les param√®tres
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- R√©sum√© audit s√©curit√© -->
                    <div class="glass-card rounded-2xl p-6 shadow-lg">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-bold text-gray-800 flex items-center gap-2">
                                <span class="material-icons text-green-600">verified</span>
                                Audit de s√©curit√©
                            </h3>
                            <span class="text-sm text-gray-500" id="sec-audit-date">Derni√®re v√©rification: -</span>
                        </div>
                        <div id="sec-audit-results" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <!-- Rempli dynamiquement -->
                        </div>
                    </div>
                </section>

                <!-- MODULE: Rendez-vous -->
                <section id="module-rdv" class="module-section">
                    <div class="glass-card rounded-2xl p-6 shadow-xl mb-6">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center">
                                <span class="material-icons text-3xl text-green-600 mr-3">calendar_month</span>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-800">Gestion des Rendez-vous</h3>
                                    <span class="text-gray-500" id="rdv-count">0 RDV</span>
                                </div>
                            </div>
                            <button onclick="openRdvModal()" class="flex items-center px-6 py-3 bg-gradient-to-r from-green-600 to-green-800 text-white rounded-xl font-bold hover:from-green-700 hover:to-green-900 transition shadow-lg">
                                <span class="material-icons mr-2">event_available</span>
                                Nouveau RDV
                            </button>
                        </div>
                        
                        <!-- Calendrier -->
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center space-x-2">
                                <button id="cal-prev" class="p-2 hover:bg-gray-100 rounded-lg transition">
                                    <span class="material-icons text-gray-600">chevron_left</span>
                                </button>
                                <span id="cal-month-year" class="font-bold text-gray-800 min-w-[180px] text-center text-lg"></span>
                                <button id="cal-next" class="p-2 hover:bg-gray-100 rounded-lg transition">
                                    <span class="material-icons text-gray-600">chevron_right</span>
                                </button>
                            </div>
                            <button onclick="goToToday()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition font-medium shadow">
                                <span class="material-icons align-middle text-sm mr-1">today</span>Aujourd'hui
                            </button>
                        </div>
                        <div class="calendar-grid mb-2">
                            <div class="text-center text-sm font-semibold text-gray-500 py-2">Lun</div>
                            <div class="text-center text-sm font-semibold text-gray-500 py-2">Mar</div>
                            <div class="text-center text-sm font-semibold text-gray-500 py-2">Mer</div>
                            <div class="text-center text-sm font-semibold text-gray-500 py-2">Jeu</div>
                            <div class="text-center text-sm font-semibold text-gray-500 py-2">Ven</div>
                            <div class="text-center text-sm font-semibold text-gray-500 py-2">Sam</div>
                            <div class="text-center text-sm font-semibold text-gray-500 py-2">Dim</div>
                        </div>
                        <div id="calendar-days" class="calendar-grid"></div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Liste des RDV du jour -->
                        <div class="glass-card rounded-2xl p-6 shadow-xl">
                            <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                <span class="material-icons mr-2 text-blue-600">today</span>
                                RDV du <span id="rdv-selected-date" class="ml-2 text-blue-600"></span>
                            </h3>
                            <div id="rdv-day-list" class="space-y-3 max-h-96 overflow-y-auto">
                                <p class="text-gray-400 text-center py-8">S√©lectionnez une date sur le calendrier</p>
                            </div>
                        </div>
                        
                        <!-- Prochains RDV -->
                        <div class="glass-card rounded-2xl p-6 shadow-xl">
                            <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                <span class="material-icons mr-2 text-amber-600">schedule</span>Prochains RDV
                            </h3>
                            <div id="rdv-upcoming" class="space-y-3 max-h-96 overflow-y-auto">
                                <p class="text-gray-400 text-center py-8">Aucun RDV √† venir</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- MODULE: Analytics -->
                <section id="module-analytics" class="module-section">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <!-- Graphique Messages -->
                        <div class="glass-card rounded-2xl p-6 shadow-xl">
                            <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                <span class="material-icons mr-2 text-blue-600">show_chart</span>Messages re√ßus
                            </h3>
                            <div class="chart-container">
                                <canvas id="chart-messages"></canvas>
                            </div>
                        </div>
                        
                        <!-- Graphique Services -->
                        <div class="glass-card rounded-2xl p-6 shadow-xl">
                            <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                                <span class="material-icons mr-2 text-purple-600">pie_chart</span>Demandes par service
                            </h3>
                            <div class="chart-container">
                                <canvas id="chart-services"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
                        <!-- Stats r√©sum√© -->
                        <div class="glass-card rounded-2xl p-6 shadow-xl">
                            <div class="text-center">
                                <span class="material-icons text-5xl text-blue-500 mb-2">trending_up</span>
                                <p class="text-4xl font-bold text-gray-800" id="analytics-total-messages">0</p>
                                <p class="text-gray-500">Total messages</p>
                            </div>
                        </div>
                        <div class="glass-card rounded-2xl p-6 shadow-xl">
                            <div class="text-center">
                                <span class="material-icons text-5xl text-green-500 mb-2">event_available</span>
                                <p class="text-4xl font-bold text-gray-800" id="analytics-total-rdv">0</p>
                                <p class="text-gray-500">Total RDV</p>
                            </div>
                        </div>
                        <div class="glass-card rounded-2xl p-6 shadow-xl">
                            <div class="text-center">
                                <span class="material-icons text-5xl text-orange-500 mb-2">percent</span>
                                <p class="text-4xl font-bold text-gray-800" id="analytics-conversion">0%</p>
                                <p class="text-gray-500">Taux de conversion</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Export des donn√©es -->
                    <div class="glass-card rounded-2xl p-6 shadow-xl">
                        <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                            <span class="material-icons mr-2 text-green-600">download</span>Export des donn√©es
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <button id="export-messages-csv" class="flex items-center justify-center p-4 bg-blue-50 hover:bg-blue-100 rounded-xl transition">
                                <span class="material-icons text-blue-600 mr-2">mail</span>
                                <span class="text-blue-800 font-medium">Messages CSV</span>
                            </button>
                            <button id="export-rdv-csv" class="flex items-center justify-center p-4 bg-green-50 hover:bg-green-100 rounded-xl transition">
                                <span class="material-icons text-green-600 mr-2">event</span>
                                <span class="text-green-800 font-medium">RDV CSV</span>
                            </button>
                            <button id="export-annonces-csv" class="flex items-center justify-center p-4 bg-purple-50 hover:bg-purple-100 rounded-xl transition">
                                <span class="material-icons text-purple-600 mr-2">inventory_2</span>
                                <span class="text-purple-800 font-medium">Annonces CSV</span>
                            </button>
                            <button id="export-all-excel" class="flex items-center justify-center p-4 bg-orange-50 hover:bg-orange-100 rounded-xl transition">
                                <span class="material-icons text-orange-600 mr-2">table_view</span>
                                <span class="text-orange-800 font-medium">Tout (Excel)</span>
                            </button>
                        </div>
                    </div>
                </section>

                <!-- MODULE: FINANCES (Comptabilit√© + Bilans unifi√©s) -->
                <section id="module-finances" class="module-section">
                    
                    <!-- En-t√™te avec titre et actions -->
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
                        <div class="flex items-center">
                            <div class="w-14 h-14 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl flex items-center justify-center mr-4 shadow-lg">
                                <span class="material-icons text-white text-2xl">account_balance</span>
                            </div>
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800">Gestion Financi√®re</h2>
                                <p class="text-gray-500">Comptabilit√©, Bilans & Analyses - KFS BTP IMMO</p>
                            </div>
                        </div>
                        <div class="flex flex-wrap gap-2">
                            <button onclick="openTransactionModal()" class="px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl font-semibold hover:from-green-600 hover:to-green-700 transition shadow-lg flex items-center gap-2">
                                <span class="material-icons">add</span> Transaction
                            </button>
                            <button onclick="exportFinancesPDF()" class="px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl font-semibold hover:from-red-600 hover:to-red-700 transition shadow-lg flex items-center gap-2">
                                <span class="material-icons">picture_as_pdf</span> Export PDF
                            </button>
                            <button onclick="exportFinancesExcel()" class="px-4 py-2 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl font-semibold hover:from-emerald-600 hover:to-emerald-700 transition shadow-lg flex items-center gap-2">
                                <span class="material-icons">table_chart</span> Excel
                            </button>
                        </div>
                    </div>
                    
                    <!-- Filtres de p√©riode -->
                    <div class="glass-card rounded-2xl p-4 mb-6 shadow-lg">
                        <div class="flex flex-wrap items-center gap-4">
                            <div class="flex items-center gap-2">
                                <span class="material-icons text-gray-500">calendar_today</span>
                                <span class="text-gray-700 font-medium">P√©riode :</span>
                            </div>
                            <select id="finance-periode" class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition">
                                <option value="mois">Ce mois</option>
                                <option value="trimestre">Ce trimestre</option>
                                <option value="semestre">Ce semestre</option>
                                <option value="annee" selected>Cette ann√©e</option>
                                <option value="tout">Tout l'historique</option>
                                <option value="custom">P√©riode personnalis√©e</option>
                            </select>
                            <select id="finance-annee" class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 transition">
                                <option value="2026">2026</option>
                                <option value="2025">2025</option>
                                <option value="2024">2024</option>
                            </select>
                            <div id="finance-custom-dates" class="hidden flex items-center gap-2">
                                <input type="date" id="finance-date-debut" class="px-3 py-2 border-2 border-gray-200 rounded-xl text-gray-800">
                                <span class="text-gray-500">√†</span>
                                <input type="date" id="finance-date-fin" class="px-3 py-2 border-2 border-gray-200 rounded-xl text-gray-800">
                            </div>
                            <button onclick="refreshFinances()" class="px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition flex items-center gap-2">
                                <span class="material-icons">refresh</span> Actualiser
                            </button>
                        </div>
                    </div>
                    
                    <!-- TABLEAU DE BORD EX√âCUTIF -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                        <!-- Total Recettes -->
                        <div class="glass-card rounded-2xl p-5 shadow-lg border-l-4 border-green-500 hover:shadow-xl transition">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm font-medium">Total Recettes</p>
                                    <p class="text-2xl font-bold text-green-600" id="fin-total-recettes">0 FCFA</p>
                                    <p class="text-xs text-green-500 mt-1" id="fin-recettes-evolution">
                                        <span class="material-icons text-sm align-middle">trending_up</span> +0% vs p√©riode pr√©c.
                                    </p>
                                </div>
                                <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                                    <span class="material-icons text-green-600">arrow_downward</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Total D√©penses -->
                        <div class="glass-card rounded-2xl p-5 shadow-lg border-l-4 border-red-500 hover:shadow-xl transition">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm font-medium">Total D√©penses</p>
                                    <p class="text-2xl font-bold text-red-600" id="fin-total-depenses">0 FCFA</p>
                                    <p class="text-xs text-red-500 mt-1" id="fin-depenses-evolution">
                                        <span class="material-icons text-sm align-middle">trending_down</span> +0% vs p√©riode pr√©c.
                                    </p>
                                </div>
                                <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center">
                                    <span class="material-icons text-red-600">arrow_upward</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- R√©sultat Net -->
                        <div class="glass-card rounded-2xl p-5 shadow-lg border-l-4 border-blue-500 hover:shadow-xl transition">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm font-medium">R√©sultat Net</p>
                                    <p class="text-2xl font-bold" id="fin-resultat-net">0 FCFA</p>
                                    <p class="text-xs mt-1" id="fin-marge-label">
                                        Marge : <span id="fin-marge">0%</span>
                                    </p>
                                </div>
                                <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                                    <span class="material-icons text-blue-600">account_balance_wallet</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Nombre de transactions -->
                        <div class="glass-card rounded-2xl p-5 shadow-lg border-l-4 border-yellow-500 hover:shadow-xl transition">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-500 text-sm font-medium">Transactions</p>
                                    <p class="text-2xl font-bold text-yellow-600" id="fin-nb-transactions">0</p>
                                    <p class="text-xs text-gray-500 mt-1">
                                        <span id="fin-nb-recettes">0</span> entr√©es / <span id="fin-nb-depenses">0</span> sorties
                                    </p>
                                </div>
                                <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center">
                                    <span class="material-icons text-yellow-600">receipt_long</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ONGLETS DE NAVIGATION -->
                    <div class="glass-card rounded-2xl shadow-lg overflow-hidden mb-6">
                        <div class="flex border-b border-gray-200 bg-gray-50">
                            <button onclick="showFinanceTab('overview')" class="finance-tab active flex-1 px-6 py-4 text-sm font-semibold transition flex items-center justify-center gap-2" data-tab="overview">
                                <span class="material-icons text-lg">dashboard</span> Vue d'ensemble
                            </button>
                            <button onclick="showFinanceTab('transactions')" class="finance-tab flex-1 px-6 py-4 text-sm font-semibold transition flex items-center justify-center gap-2" data-tab="transactions">
                                <span class="material-icons text-lg">swap_horiz</span> Transactions
                            </button>
                            <button onclick="showFinanceTab('analyse')" class="finance-tab flex-1 px-6 py-4 text-sm font-semibold transition flex items-center justify-center gap-2" data-tab="analyse">
                                <span class="material-icons text-lg">analytics</span> Analyses
                            </button>
                            <button onclick="showFinanceTab('bilan')" class="finance-tab flex-1 px-6 py-4 text-sm font-semibold transition flex items-center justify-center gap-2" data-tab="bilan">
                                <span class="material-icons text-lg">assessment</span> Bilan d√©taill√©
                            </button>
                        </div>
                        
                        <!-- TAB: Vue d'ensemble -->
                        <div id="finance-tab-overview" class="finance-tab-content p-6">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <!-- Graphique √©volution mensuelle -->
                                <div class="bg-white rounded-xl p-5 border border-gray-100">
                                    <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                        <span class="material-icons text-blue-600">show_chart</span>
                                        √âvolution mensuelle
                                    </h4>
                                    <div style="height: 280px;">
                                        <canvas id="fin-chart-evolution"></canvas>
                                    </div>
                                </div>
                                
                                <!-- R√©partition des d√©penses -->
                                <div class="bg-white rounded-xl p-5 border border-gray-100">
                                    <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                        <span class="material-icons text-red-600">pie_chart</span>
                                        R√©partition des d√©penses
                                    </h4>
                                    <div style="height: 280px;">
                                        <canvas id="fin-chart-depenses"></canvas>
                                    </div>
                                </div>
                                
                                <!-- Top 5 d√©penses -->
                                <div class="bg-white rounded-xl p-5 border border-gray-100">
                                    <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                        <span class="material-icons text-orange-600">trending_up</span>
                                        Top 5 Cat√©gories de d√©penses
                                    </h4>
                                    <div id="fin-top-depenses" class="space-y-3"></div>
                                </div>
                                
                                <!-- Top 5 recettes -->
                                <div class="bg-white rounded-xl p-5 border border-gray-100">
                                    <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                        <span class="material-icons text-green-600">trending_down</span>
                                        Top 5 Sources de revenus
                                    </h4>
                                    <div id="fin-top-recettes" class="space-y-3"></div>
                                </div>
                            </div>
                            
                            <!-- Indicateurs de sant√© financi√®re -->
                            <div class="mt-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-5 border border-blue-100">
                                <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                    <span class="material-icons text-indigo-600">health_and_safety</span>
                                    Indicateurs de sant√© financi√®re
                                </h4>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    <div class="text-center">
                                        <p class="text-xs text-gray-500 mb-1">Ratio de rentabilit√©</p>
                                        <p class="text-2xl font-bold" id="fin-ratio-rentabilite">0%</p>
                                    </div>
                                    <div class="text-center">
                                        <p class="text-xs text-gray-500 mb-1">Taux de croissance</p>
                                        <p class="text-2xl font-bold" id="fin-taux-croissance">0%</p>
                                    </div>
                                    <div class="text-center">
                                        <p class="text-xs text-gray-500 mb-1">Moyenne mensuelle</p>
                                        <p class="text-lg font-bold" id="fin-moyenne-mensuelle">0 FCFA</p>
                                    </div>
                                    <div class="text-center">
                                        <p class="text-xs text-gray-500 mb-1">Pr√©vision fin d'ann√©e</p>
                                        <p class="text-lg font-bold" id="fin-prevision">0 FCFA</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- TAB: Transactions -->
                        <div id="finance-tab-transactions" class="finance-tab-content hidden p-6">
                            <!-- Filtres transactions -->
                            <div class="flex flex-wrap gap-3 mb-4">
                                <select id="fin-filter-type" class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                    <option value="all">Toutes les transactions</option>
                                    <option value="recette">Recettes uniquement</option>
                                    <option value="depense">D√©penses uniquement</option>
                                </select>
                                <select id="fin-filter-categorie" class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                    <option value="all">Toutes cat√©gories</option>
                                    <option value="ventes">Ventes</option>
                                    <option value="acomptes">Acomptes</option>
                                    <option value="location">Location</option>
                                    <option value="service">Service/Prestation</option>
                                    <option value="achats">Achats/Approvisionnement</option>
                                    <option value="chantier">Chantier/Travaux</option>
                                    <option value="salaires">Salaires</option>
                                    <option value="charges_sociales">Charges sociales</option>
                                    <option value="materiel">Mat√©riel/Fournitures</option>
                                    <option value="transport">Transport</option>
                                    <option value="charges">Charges fixes</option>
                                    <option value="autre">Autre</option>
                                </select>
                                <select id="fin-filter-source" class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                    <option value="all">Toutes sources</option>
                                    <option value="manual">Manuelles uniquement</option>
                                    <option value="auto">Automatiques uniquement</option>
                                    <option value="factures">üìÑ Factures/Devis</option>
                                    <option value="stocks">üì¶ Stocks</option>
                                    <option value="projets">üèóÔ∏è Projets</option>
                                    <option value="paie">üíµ Fiche de paie</option>
                                    <option value="employes">üë∑ Employ√©s</option>
                                </select>
                                <input type="text" id="fin-search" placeholder="Rechercher..." class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800 flex-1 min-w-48">
                            </div>
                            
                            <!-- Liste des transactions -->
                            <div id="fin-transactions-list" class="space-y-3 max-h-[500px] overflow-y-auto"></div>
                            
                            <!-- Pagination -->
                            <div id="fin-pagination" class="flex justify-center items-center gap-2 mt-4"></div>
                        </div>
                        
                        <!-- TAB: Analyses -->
                        <div id="finance-tab-analyse" class="finance-tab-content hidden p-6">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <!-- Comparaison mensuelle -->
                                <div class="bg-white rounded-xl p-5 border border-gray-100">
                                    <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                        <span class="material-icons text-purple-600">compare</span>
                                        Comparaison mensuelle
                                    </h4>
                                    <div style="height: 300px;">
                                        <canvas id="fin-chart-comparaison"></canvas>
                                    </div>
                                </div>
                                
                                <!-- Tendance -->
                                <div class="bg-white rounded-xl p-5 border border-gray-100">
                                    <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                        <span class="material-icons text-cyan-600">timeline</span>
                                        Tendance du r√©sultat net
                                    </h4>
                                    <div style="height: 300px;">
                                        <canvas id="fin-chart-tendance"></canvas>
                                    </div>
                                </div>
                                
                                <!-- Analyse IA -->
                                <div class="lg:col-span-2 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl p-5 border border-indigo-100">
                                    <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                        <span class="material-icons text-indigo-600">psychology</span>
                                        Analyse intelligente & Recommandations
                                    </h4>
                                    <div id="fin-ia-analyse" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- TAB: Bilan d√©taill√© -->
                        <div id="finance-tab-bilan" class="finance-tab-content hidden p-6">
                            <!-- Compte de r√©sultat -->
                            <div class="bg-white rounded-xl p-5 border border-gray-100 mb-6">
                                <div class="flex justify-between items-center mb-4">
                                    <h4 class="font-bold text-gray-800 flex items-center gap-2">
                                        <span class="material-icons text-blue-600">receipt</span>
                                        Compte de R√©sultat
                                    </h4>
                                    <span class="text-sm text-gray-500" id="fin-bilan-periode-label">Ann√©e 2026</span>
                                </div>
                                
                                <!-- Tableau compte de r√©sultat -->
                                <div class="overflow-x-auto">
                                    <table class="w-full text-sm">
                                        <thead class="bg-gray-100">
                                            <tr>
                                                <th class="text-left p-3 font-semibold">Libell√©</th>
                                                <th class="text-right p-3 font-semibold">Montant (FCFA)</th>
                                                <th class="text-right p-3 font-semibold">% du total</th>
                                            </tr>
                                        </thead>
                                        <tbody id="fin-compte-resultat">
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <!-- Tableau r√©capitulatif mensuel -->
                            <div class="bg-white rounded-xl p-5 border border-gray-100">
                                <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                    <span class="material-icons text-green-600">table_chart</span>
                                    R√©capitulatif mensuel d√©taill√©
                                </h4>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-sm" id="fin-tableau-mensuel">
                                        <thead class="bg-gray-100">
                                            <tr>
                                                <th class="text-left p-3">Mois</th>
                                                <th class="text-right p-3">Recettes</th>
                                                <th class="text-right p-3">D√©penses</th>
                                                <th class="text-right p-3">R√©sultat</th>
                                                <th class="text-right p-3">Cumul</th>
                                            </tr>
                                        </thead>
                                        <tbody id="fin-bilan-mensuel"></tbody>
                                        <tfoot class="bg-blue-50 font-bold" id="fin-bilan-total"></tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Derni√®res transactions rapides -->
                    <div class="glass-card rounded-2xl p-6 shadow-lg">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="font-bold text-gray-800 flex items-center gap-2">
                                <span class="material-icons text-gray-600">history</span>
                                Derni√®res transactions
                            </h4>
                            <button onclick="showFinanceTab('transactions')" class="text-blue-600 hover:text-blue-700 text-sm font-medium">
                                Voir tout ‚Üí
                            </button>
                        </div>
                        <div id="fin-recent-transactions" class="space-y-2"></div>
                    </div>
                    
                </section>

                <!-- MODULE: CRM Clients -->
                <section id="module-clients" class="module-section">
                    <div class="glass-card rounded-2xl p-6 shadow-xl">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center">
                                <span class="material-icons text-3xl text-blue-600 mr-3">group</span>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-800">Gestion des Clients (CRM)</h3>
                                    <span class="text-gray-500" id="clients-count">0 clients</span>
                                </div>
                            </div>
                            <button onclick="openClientModal()" class="flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-800 text-white rounded-xl font-bold hover:from-blue-700 hover:to-blue-900 transition shadow-lg">
                                <span class="material-icons mr-2">person_add</span>
                                Nouveau client
                            </button>
                        </div>
                        
                        <!-- Filtres -->
                        <div class="flex flex-wrap gap-3 mb-6">
                            <input type="text" id="client-search" placeholder="Rechercher un client..." class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800 flex-1 min-w-48">
                            <select id="client-filter-type" class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                <option value="all">Tous les types</option>
                                <option value="particulier">Particuliers</option>
                                <option value="entreprise">Entreprises</option>
                            </select>
                            <select id="client-filter" class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                <option value="all">Tous les statuts</option>
                                <option value="prospect">Prospects</option>
                                <option value="actif">Actifs</option>
                                <option value="en_negociation">En n√©gociation</option>
                                <option value="vip">VIP</option>
                                <option value="inactif">Inactifs</option>
                            </select>
                        </div>
                        
                        <div id="clients-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <p class="text-gray-400 col-span-full text-center py-12">Aucun client enregistr√©</p>
                        </div>
                    </div>
                    
                    <!-- Stats rapides -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
                        <div class="glass-card rounded-xl p-4 text-center">
                            <span class="material-icons text-2xl text-yellow-500">pending</span>
                            <p class="text-2xl font-bold text-gray-800" id="clients-prospects">0</p>
                            <p class="text-sm text-gray-500">Prospects</p>
                        </div>
                        <div class="glass-card rounded-xl p-4 text-center">
                            <span class="material-icons text-2xl text-green-500">check_circle</span>
                            <p class="text-2xl font-bold text-gray-800" id="clients-actifs">0</p>
                            <p class="text-sm text-gray-500">Actifs</p>
                        </div>
                        <div class="glass-card rounded-xl p-4 text-center">
                            <span class="material-icons text-2xl text-blue-500">handshake</span>
                            <p class="text-2xl font-bold text-gray-800" id="clients-negociation">0</p>
                            <p class="text-sm text-gray-500">En n√©gociation</p>
                        </div>
                        <div class="glass-card rounded-xl p-4 text-center">
                            <span class="material-icons text-2xl text-amber-500">star</span>
                            <p class="text-2xl font-bold text-gray-800" id="clients-vip">0</p>
                            <p class="text-sm text-gray-500">VIP</p>
                        </div>
                    </div>
                </section>

                <!-- MODULE: Projets/Chantiers -->
                <section id="module-projets" class="module-section">
                    <div class="glass-card rounded-2xl p-6 shadow-xl">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center">
                                <span class="material-icons text-3xl text-orange-600 mr-3">construction</span>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-800">Projets & Chantiers</h3>
                                    <span class="text-gray-500" id="projets-count">0 projets</span>
                                </div>
                            </div>
                            <button onclick="openProjetModal()" class="flex items-center px-6 py-3 bg-blue-600 text-gray-900 rounded-xl font-bold hover:bg-blue-700 transition shadow-lg">
                                <span class="material-icons mr-2">add_task</span>
                                Nouveau projet
                            </button>
                        </div>
                        
                        <!-- Filtres -->
                        <div class="flex flex-wrap gap-3 mb-6">
                            <input type="text" id="projet-search" placeholder="Rechercher un projet..." class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800 flex-1 min-w-48">
                            <select id="projet-filter" class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                <option value="all">Tous les statuts</option>
                                <option value="planifie">Planifi√©s</option>
                                <option value="en_cours">En cours</option>
                                <option value="termine">Termin√©s</option>
                                <option value="suspendu">Suspendus</option>
                            </select>
                            <select id="projet-filter-type" class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                <option value="all">Tous les types</option>
                                <option value="renovation">R√©novation</option>
                                <option value="construction">Construction</option>
                                <option value="amenagement">Am√©nagement</option>
                            </select>
                        </div>
                        
                        <div id="projets-list" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <p class="text-gray-400 col-span-full text-center py-12">Aucun projet enregistr√©</p>
                        </div>
                    </div>
                    
                    <!-- Stats rapides -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
                        <div class="glass-card rounded-xl p-4 text-center">
                            <span class="material-icons text-2xl text-blue-500">pending</span>
                            <p class="text-2xl font-bold text-gray-800" id="projets-planifies">0</p>
                            <p class="text-sm text-gray-500">Planifi√©s</p>
                        </div>
                        <div class="glass-card rounded-xl p-4 text-center">
                            <span class="material-icons text-2xl text-green-500">play_circle</span>
                            <p class="text-2xl font-bold text-gray-800" id="projets-en-cours">0</p>
                            <p class="text-sm text-gray-500">En cours</p>
                        </div>
                        <div class="glass-card rounded-xl p-4 text-center">
                            <span class="material-icons text-2xl text-emerald-500">check_circle</span>
                            <p class="text-2xl font-bold text-gray-800" id="projets-termines">0</p>
                            <p class="text-sm text-gray-500">Termin√©s</p>
                        </div>
                        <div class="glass-card rounded-xl p-4 text-center">
                            <span class="material-icons text-2xl text-amber-500">payments</span>
                            <p class="text-lg font-bold text-gray-800" id="projets-budget-total">0 FCFA</p>
                            <p class="text-sm text-gray-500">Budget total</p>
                        </div>
                    </div>
                </section>

                <!-- MODULE: Employ√©s -->
                <section id="module-employes" class="module-section">
                    <div class="glass-card rounded-2xl p-6 shadow-xl">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center">
                                <span class="material-icons text-3xl text-indigo-600 mr-3">badge</span>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-800">Gestion des Employ√©s</h3>
                                    <span class="text-gray-500" id="employes-count">0 employ√©s</span>
                                </div>
                            </div>
                            <button onclick="openEmployeModal()" class="flex items-center px-6 py-3 bg-gradient-to-r from-indigo-600 to-indigo-800 text-white rounded-xl font-bold hover:from-indigo-700 hover:to-indigo-900 transition shadow-lg">
                                <span class="material-icons mr-2">person_add</span>
                                Nouvel employ√©
                            </button>
                        </div>
                        
                        <!-- Filtres -->
                        <div class="flex flex-wrap gap-3 mb-6">
                            <input type="text" id="employe-search" placeholder="Rechercher un employ√©..." class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800 flex-1 min-w-48">
                            <select id="employe-filter-departement" class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                <option value="all">Tous les d√©partements</option>
                                <option value="direction">Direction</option>
                                <option value="technique">Technique</option>
                                <option value="commercial">Commercial</option>
                                <option value="administratif">Administratif</option>
                            </select>
                            <select id="employe-filter-statut" class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                <option value="all">Tous les statuts</option>
                                <option value="actif">Actifs</option>
                                <option value="conge">En cong√©</option>
                                <option value="parti">Partis</option>
                            </select>
                        </div>
                        
                        <div id="employes-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <p class="text-gray-400 col-span-full text-center py-12">Aucun employ√© enregistr√©</p>
                        </div>
                    </div>
                </section>

                <!-- MODULE: Stocks -->
                <section id="module-stocks" class="module-section">
                    <div class="glass-card rounded-2xl p-6 shadow-xl">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center">
                                <span class="material-icons text-3xl text-teal-600 mr-3">inventory_2</span>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-800">Gestion des Stocks</h3>
                                    <span class="text-gray-500" id="stocks-count">0 articles</span>
                                </div>
                            </div>
                            <button onclick="openStockModal()" class="flex items-center px-6 py-3 bg-blue-600 text-gray-900 rounded-xl font-bold hover:bg-blue-700 transition shadow-lg">
                                <span class="material-icons mr-2">add_box</span>
                                Nouvel article
                            </button>
                        </div>
                        
                        <!-- Filtres -->
                        <div class="flex flex-wrap gap-3 mb-6">
                            <input type="text" id="stock-search" placeholder="Rechercher un article..." class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800 flex-1 min-w-48">
                            <select id="stock-filter" class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                <option value="all">Tous les articles</option>
                                <option value="bas">Stock bas</option>
                                <option value="epuise">√âpuis√©</option>
                            </select>
                        </div>
                        
                        <div id="stocks-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <p class="text-gray-400 col-span-full text-center py-12">Aucun article en stock</p>
                        </div>
                    </div>
                    
                    <!-- Alertes stock -->
                    <div class="glass-card rounded-2xl p-6 shadow-xl mt-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                            <span class="material-icons mr-2 text-yellow-500">warning</span>Alertes stock bas
                        </h3>
                        <div id="stock-alertes" class="space-y-2">
                            <p class="text-gray-400 text-center py-4">Aucune alerte</p>
                        </div>
                    </div>
                </section>

                <!-- MODULE: Documents -->
                <section id="module-documents" class="module-section">
                    <div class="glass-card rounded-2xl p-6 shadow-xl">
                        <div class="flex items-center justify-between mb-6">
                            <div class="flex items-center">
                                <span class="material-icons text-3xl text-gray-600 mr-3">folder_open</span>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-800">Gestion des Documents</h3>
                                    <span class="text-gray-500" id="documents-count">0 documents</span>
                                </div>
                            </div>
                            <button onclick="openDocumentModal()" class="flex items-center px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-800 text-white rounded-xl font-bold hover:from-gray-700 hover:to-gray-900 transition shadow-lg">
                                <span class="material-icons mr-2">upload_file</span>
                                Nouveau document
                            </button>
                        </div>
                        
                        <!-- Filtres -->
                        <div class="flex flex-wrap gap-3 mb-6">
                            <input type="text" id="doc-search" placeholder="Rechercher un document..." class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800 flex-1 min-w-48">
                            <select id="doc-categorie-filter" class="px-4 py-2 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                <option value="all">Toutes cat√©gories</option>
                                <option value="contrat">Contrats</option>
                                <option value="bail">Baux</option>
                                <option value="facture">Factures</option>
                                <option value="devis">Devis</option>
                                <option value="legal">Documents l√©gaux</option>
                                <option value="autre">Autres</option>
                            </select>
                        </div>
                        
                        <div id="documents-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <p class="text-gray-400 col-span-full text-center py-12">Aucun document enregistr√©</p>
                        </div>
                    </div>

                    <!-- Mod√®les de documents -->
                    <div class="glass-card rounded-2xl p-6 shadow-xl mt-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold text-gray-800 flex items-center">
                                <span class="material-icons mr-2 text-blue-600">auto_awesome</span>Mod√®les de Documents
                            </h3>
                            <button onclick="openTemplateEditor()" class="flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-800 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-blue-900 transition shadow-lg text-sm">
                                <span class="material-icons mr-1 text-sm">add</span>Cr√©er un mod√®le
                            </button>
                        </div>
                        
                        <!-- Mod√®les par d√©faut -->
                        <div class="mb-6">
                            <h4 class="text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3">Mod√®les par d√©faut</h4>
                            <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
                                <button onclick="generateDocTemplate('contrat')" class="flex flex-col items-center p-4 bg-blue-50 hover:bg-blue-100 rounded-xl transition group">
                                    <span class="material-icons text-blue-600 text-2xl mb-2">description</span>
                                    <span class="text-blue-800 text-sm font-medium">Contrat</span>
                                    <span class="text-xs text-blue-500 mt-1 opacity-0 group-hover:opacity-100 transition">Utiliser</span>
                                </button>
                                <button onclick="generateDocTemplate('bail')" class="flex flex-col items-center p-4 bg-green-50 hover:bg-green-100 rounded-xl transition group">
                                    <span class="material-icons text-green-600 text-2xl mb-2">home</span>
                                    <span class="text-green-800 text-sm font-medium">Bail</span>
                                    <span class="text-xs text-green-500 mt-1 opacity-0 group-hover:opacity-100 transition">Utiliser</span>
                                </button>
                                <button onclick="generateDocTemplate('location-courte')" class="flex flex-col items-center p-4 bg-yellow-100 hover:bg-yellow-200 rounded-xl transition group">
                                    <span class="material-icons text-yellow-700 text-2xl mb-2">hotel</span>
                                    <span class="text-white text-sm font-semibold">Location Courte Dur√©e</span>
                                    <span class="text-xs text-yellow-700 mt-1 opacity-0 group-hover:opacity-100 transition">Utiliser</span>
                                </button>
                                <button onclick="generateDocTemplate('devis')" class="flex flex-col items-center p-4 bg-blue-600 hover:bg-blue-700 rounded-xl transition group shadow-lg">
                                    <span class="material-icons text-white text-2xl mb-2">request_quote</span>
                                    <span class="text-white text-sm font-bold">Devis</span>
                                    <span class="text-xs text-orange-100 mt-1 opacity-0 group-hover:opacity-100 transition">Utiliser</span>
                                </button>
                                <button onclick="generateDocTemplate('attestation')" class="flex flex-col items-center p-4 bg-purple-50 hover:bg-purple-100 rounded-xl transition group">
                                    <span class="material-icons text-purple-600 text-2xl mb-2">verified</span>
                                    <span class="text-purple-800 text-sm font-medium">Attestation</span>
                                    <span class="text-xs text-purple-500 mt-1 opacity-0 group-hover:opacity-100 transition">Utiliser</span>
                                </button>
                                <button onclick="generateDocTemplate('certificatTravail')" class="flex flex-col items-center p-4 bg-green-50 hover:bg-green-100 rounded-xl transition group">
                                    <span class="material-icons text-green-600 text-2xl mb-2">badge</span>
                                    <span class="text-green-800 text-sm font-medium">Certificat de travail</span>
                                    <span class="text-xs text-green-500 mt-1 opacity-0 group-hover:opacity-100 transition">Utiliser</span>
                                </button>
                                <script>document.querySelector('button[onclick*="certificatTravail"]').onclick = function(){window.openCertificatTravailForm();};</script>
                                <button onclick="gotoFichePaieModule()" class="flex flex-col items-center p-4 bg-indigo-100 hover:bg-indigo-200 rounded-xl transition group">
                                    <span class="material-icons text-indigo-600 text-2xl mb-2">payments</span>
                                    <span class="text-indigo-900 text-sm font-semibold">Fiche de paie</span>
                                    <span class="text-xs text-indigo-600 mt-1 opacity-0 group-hover:opacity-100 transition">Utiliser</span>
                                </button>
                            </div>
                        </div>
                        

                        <!-- Mod√®les personnalis√©s -->
                        <div>
                            <h4 class="text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3">Mes mod√®les personnalis√©s</h4>
                            <div id="custom-templates-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <p class="text-gray-400 text-center py-6 col-span-full">Aucun mod√®le personnalis√©. Cliquez sur "Cr√©er un mod√®le" pour commencer.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- MODULE: Fiche de paie employ√© -->
                <section id="module-fiche-paie" class="module-section">
                    <div class="glass-card rounded-2xl p-6 shadow-xl">
                        <!-- Le formulaire et l'aper√ßu sont inject√©s par JS -->
                    </div>
                </section>

            </main>
        </div>
    </div>

    <!-- Modal Transaction -->
    <div id="transaction-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="fixed inset-0 bg-black/60 backdrop-blur-sm" onclick="closeTransactionModal()"></div>
        <div class="relative min-h-screen flex items-center justify-center p-4">
            <div class="relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden">
                <!-- Header -->
                <div id="trans-modal-header" class="sticky top-0 z-10 px-6 py-4 border-b bg-gradient-to-r from-blue-600 to-blue-800">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 id="transaction-modal-title" class="text-xl font-bold text-white">Nouvelle transaction</h3>
                            <p class="text-blue-200 text-sm mt-1">Enregistrez vos op√©rations financi√®res</p>
                        </div>
                        <button onclick="closeTransactionModal()" class="text-white/80 hover:text-white p-2 hover:bg-white/10 rounded-full transition">
                            <span class="material-icons">close</span>
                        </button>
                    </div>
                </div>
                
                <!-- Form Content -->
                <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 160px);">
                    <form id="transaction-form" class="space-y-5">
                        <input type="hidden" id="trans-type">
                        <input type="hidden" id="trans-edit-id">
                        
                        <!-- Section Informations principales -->
                        <div class="bg-gray-50 rounded-xl p-5">
                            <h4 class="font-semibold text-gray-700 mb-4 flex items-center">
                                <span class="material-icons mr-2 text-blue-600">info</span>Informations principales
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="md:col-span-2">
                                    <label class="block text-gray-700 text-sm font-medium mb-1">Description *</label>
                                    <input type="text" id="trans-desc" placeholder="Ex: Vente appartement Almadies" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-200" required>
                                </div>
                                <div>
                                    <label class="block text-gray-700 text-sm font-medium mb-1">Montant (FCFA) *</label>
                                    <input type="number" id="trans-montant" placeholder="0" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500" required min="0">
                                </div>
                                <div>
                                    <label class="block text-gray-700 text-sm font-medium mb-1">Cat√©gorie *</label>
                                    <select id="trans-categorie" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500">
                                        <!-- Options dynamiques -->
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Section Date et R√©f√©rence -->
                        <div class="bg-gray-50 rounded-xl p-5">
                            <h4 class="font-semibold text-gray-700 mb-4 flex items-center">
                                <span class="material-icons mr-2 text-purple-600">event</span>Date & R√©f√©rence
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-gray-700 text-sm font-medium mb-1">Date *</label>
                                    <input type="date" id="trans-date" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500" required>
                                </div>
                                <div>
                                    <label class="block text-gray-700 text-sm font-medium mb-1">N¬∞ R√©f√©rence</label>
                                    <input type="text" id="trans-reference" placeholder="REF-001" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500">
                                </div>
                                <div>
                                    <label class="block text-gray-700 text-sm font-medium mb-1">N¬∞ Facture associ√©e</label>
                                    <input type="text" id="trans-facture" placeholder="FAC-2026-001" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Section Client/Fournisseur -->
                        <div class="bg-gray-50 rounded-xl p-5">
                            <h4 class="font-semibold text-gray-700 mb-4 flex items-center">
                                <span class="material-icons mr-2 text-green-600">person</span>Client / Fournisseur
                            </h4>
                            
                            <!-- S√©lecteur client existant pour auto-remplissage -->
                            <div class="bg-blue-50 rounded-xl p-4 mb-4 border-2 border-dashed border-blue-200">
                                <label class="block text-blue-800 text-sm font-bold mb-2">
                                    <span class="material-icons align-middle text-sm mr-1">flash_on</span>Charger un client existant
                                </label>
                                <select id="trans-client-select" class="w-full px-4 py-3 bg-white border-2 border-blue-300 rounded-xl text-gray-800 focus:border-blue-500 focus:ring-2 focus:ring-blue-200">
                                    <option value="">-- Saisie manuelle --</option>
                                </select>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-gray-700 text-sm font-medium mb-1">Nom / Raison sociale</label>
                                    <input type="text" id="trans-tiers" placeholder="Nom du client ou fournisseur" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500">
                                </div>
                                <div>
                                    <label class="block text-gray-700 text-sm font-medium mb-1">Projet associ√©</label>
                                    <select id="trans-projet" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500">
                                        <option value="">-- Aucun projet --</option>
                                        <!-- Options dynamiques -->
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Section Mode de paiement -->
                        <div class="bg-gray-50 rounded-xl p-5">
                            <h4 class="font-semibold text-gray-700 mb-4 flex items-center">
                                <span class="material-icons mr-2 text-amber-600">payments</span>Mode de paiement
                            </h4>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                <label class="relative">
                                    <input type="radio" name="trans-mode-paiement" value="especes" class="peer sr-only" checked>
                                    <div class="p-3 border-2 rounded-xl cursor-pointer text-center transition peer-checked:border-blue-500 peer-checked:bg-blue-50 hover:border-gray-300">
                                        <span class="material-icons text-2xl text-gray-600 peer-checked:text-blue-600">payments</span>
                                        <p class="text-xs mt-1 font-medium">Esp√®ces</p>
                                    </div>
                                </label>
                                <label class="relative">
                                    <input type="radio" name="trans-mode-paiement" value="virement" class="peer sr-only">
                                    <div class="p-3 border-2 rounded-xl cursor-pointer text-center transition peer-checked:border-blue-500 peer-checked:bg-blue-50 hover:border-gray-300">
                                        <span class="material-icons text-2xl text-gray-600 peer-checked:text-blue-600">account_balance</span>
                                        <p class="text-xs mt-1 font-medium">Virement</p>
                                    </div>
                                </label>
                                <label class="relative">
                                    <input type="radio" name="trans-mode-paiement" value="cheque" class="peer sr-only">
                                    <div class="p-3 border-2 rounded-xl cursor-pointer text-center transition peer-checked:border-blue-500 peer-checked:bg-blue-50 hover:border-gray-300">
                                        <span class="material-icons text-2xl text-gray-600 peer-checked:text-blue-600">receipt</span>
                                        <p class="text-xs mt-1 font-medium">Ch√®que</p>
                                    </div>
                                </label>
                                <label class="relative">
                                    <input type="radio" name="trans-mode-paiement" value="mobile" class="peer sr-only">
                                    <div class="p-3 border-2 rounded-xl cursor-pointer text-center transition peer-checked:border-blue-500 peer-checked:bg-blue-50 hover:border-gray-300">
                                        <span class="material-icons text-2xl text-gray-600 peer-checked:text-blue-600">phone_android</span>
                                        <p class="text-xs mt-1 font-medium">Mobile Money</p>
                                    </div>
                                </label>
                            </div>
                            <div id="trans-cheque-details" class="hidden mt-4 grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-gray-700 text-sm font-medium mb-1">N¬∞ Ch√®que</label>
                                    <input type="text" id="trans-num-cheque" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                </div>
                                <div>
                                    <label class="block text-gray-700 text-sm font-medium mb-1">Banque</label>
                                    <input type="text" id="trans-banque" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Section TVA et justificatif -->
                        <div class="bg-gray-50 rounded-xl p-5">
                            <h4 class="font-semibold text-gray-700 mb-4 flex items-center">
                                <span class="material-icons mr-2 text-red-600">receipt_long</span>TVA & Justificatifs
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-gray-700 text-sm font-medium mb-1">TVA</label>
                                    <select id="trans-tva" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500">
                                        <option value="0">Exon√©r√© de TVA</option>
                                        <option value="18">TVA 18%</option>
                                        <option value="10">TVA 10%</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-gray-700 text-sm font-medium mb-1">Statut</label>
                                    <select id="trans-statut" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500">
                                        <option value="effectue">Effectu√©</option>
                                        <option value="en_attente">En attente</option>
                                        <option value="annule">Annul√©</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mt-4">
                                <label class="flex items-center space-x-3 cursor-pointer">
                                    <input type="checkbox" id="trans-justificatif" class="w-5 h-5 text-blue-600 rounded">
                                    <span class="text-sm text-gray-700">Justificatif disponible (re√ßu, facture, bon de commande...)</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Notes -->
                        <div class="bg-gray-50 rounded-xl p-5">
                            <label class="block text-gray-700 text-sm font-medium mb-2">Notes / Observations</label>
                            <textarea id="trans-notes" rows="3" placeholder="Informations compl√©mentaires sur cette transaction..." class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500"></textarea>
                        </div>
                    </form>
                </div>
                
                <!-- Footer -->
                <div class="sticky bottom-0 bg-gray-50 border-t px-6 py-4 flex justify-between items-center">
                    <button type="button" onclick="closeTransactionModal()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition">
                        Annuler
                    </button>
                    <button type="submit" form="transaction-form" id="trans-submit-btn" class="px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-blue-800 transition shadow-lg">
                        <span class="material-icons align-middle text-sm mr-1">save</span>Enregistrer
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Aper√ßu Facture -->
    <div id="facture-preview-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/50" onclick="closeFacturePreview()"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto">
            <div id="facture-preview-content" class="facture-preview relative p-8">
                <!-- Contenu de la facture g√©n√©r√© dynamiquement -->
            </div>
            <div class="sticky bottom-0 bg-white border-t p-4 flex justify-end space-x-3 no-print">
                <button onclick="closeFacturePreview()" class="px-6 py-2 bg-gray-200 text-gray-700 rounded-xl">Fermer</button>
                <button onclick="printFacture()" class="px-6 py-2 bg-blue-600 text-white rounded-xl">
                    <span class="material-icons align-middle text-sm mr-1">print</span>Imprimer
                </button>
                <button onclick="downloadFacturePDF()" class="px-6 py-2 bg-red-600 text-white rounded-xl">
                    <span class="material-icons align-middle text-sm mr-1">picture_as_pdf</span>PDF
                </button>
            </div>
        </div>
    </div>

    <!-- ============================================== -->
    <!-- MODAL EMPLOY√â -->
    <!-- ============================================== -->
    <div id="employe-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="fixed inset-0 bg-black/60 backdrop-blur-sm" onclick="closeEmployeModal()"></div>
        <div class="relative min-h-screen flex items-center justify-center p-4">
            <div class="relative bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden animate__animated animate__fadeInUp animate__faster">
                <!-- Header -->
                <div class="sticky top-0 z-10 px-6 py-4 border-b bg-gradient-to-r from-indigo-600 to-indigo-800">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 id="employe-modal-title" class="text-xl font-bold text-white">Nouvel employ√©</h3>
                            <p class="text-indigo-200 text-sm mt-1">Renseignez les informations de l'employ√©</p>
                        </div>
                        <button onclick="closeEmployeModal()" class="text-white/80 hover:text-white p-2 hover:bg-white/10 rounded-full transition">
                            <span class="material-icons">close</span>
                        </button>
                    </div>
                </div>
                
                <!-- Form Content -->
                <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 160px);">
                    <form id="employe-form" class="space-y-5">
                        <input type="hidden" id="employe-edit-id">
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Colonne gauche -->
                            <div class="space-y-5">
                                <!-- Identit√© -->
                                <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                    <h4 class="font-semibold text-gray-700 flex items-center">
                                        <span class="material-icons text-blue-600 mr-2">person</span>Identit√©
                                    </h4>
                                    <div class="grid grid-cols-4 gap-3">
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">Civilit√©</label>
                                            <select id="employe-civilite" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                                <option value="M.">M.</option>
                                                <option value="Mme">Mme</option>
                                            </select>
                                        </div>
                                        <div class="col-span-2">
                                            <label class="block text-gray-600 text-sm mb-1">Pr√©nom *</label>
                                            <input type="text" id="employe-prenom" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" required>
                                        </div>
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">Nom *</label>
                                            <input type="text" id="employe-nom" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" required>
                                        </div>
                                    </div>
                                    <div class="grid grid-cols-2 gap-3">
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">Date naissance</label>
                                            <input type="date" id="employe-naissance" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                        </div>
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">Lieu naissance</label>
                                            <input type="text" id="employe-lieu-naissance" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" placeholder="Dakar">
                                        </div>
                                    </div>
                                    <div class="grid grid-cols-2 gap-3">
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">N¬∞ CNI *</label>
                                            <input type="text" id="employe-cni" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" required>
                                        </div>
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">Nationalit√©</label>
                                            <input type="text" id="employe-nationalite" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" value="S√©n√©galaise">
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Coordonn√©es -->
                                <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                    <h4 class="font-semibold text-gray-700 flex items-center">
                                        <span class="material-icons text-green-600 mr-2">contact_phone</span>Coordonn√©es
                                    </h4>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">T√©l√©phone *</label>
                                        <input type="tel" id="employe-tel" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" placeholder="+221 77 XXX XX XX" required>
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Email</label>
                                        <input type="email" id="employe-email" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Adresse</label>
                                        <input type="text" id="employe-adresse" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                    </div>
                                    <div class="grid grid-cols-2 gap-3">
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">Contact urgence</label>
                                            <input type="text" id="employe-urgence-nom" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" placeholder="Nom">
                                        </div>
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">T√©l. urgence</label>
                                            <input type="tel" id="employe-urgence-tel" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Colonne droite -->
                            <div class="space-y-5">
                                <!-- Informations professionnelles -->
                                <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                    <h4 class="font-semibold text-gray-700 flex items-center">
                                        <span class="material-icons text-purple-600 mr-2">work</span>Poste
                                    </h4>
                                    <div class="grid grid-cols-2 gap-3">
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">Matricule</label>
                                            <input type="text" id="employe-matricule" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" placeholder="Auto">
                                        </div>
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">D√©partement</label>
                                            <select id="employe-departement" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                                <option value="">--</option>
                                                <option value="direction">Direction</option>
                                                <option value="technique">Technique</option>
                                                <option value="commercial">Commercial</option>
                                                <option value="administratif">Administratif</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Poste / Fonction *</label>
                                        <select id="employe-poste" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" required>
                                            <option value="">-- S√©lectionner --</option>
                                            <option value="directeur">Directeur</option>
                                            <option value="chef_chantier">Chef de chantier</option>
                                            <option value="conducteur_travaux">Conducteur de travaux</option>
                                            <option value="macon">Ma√ßon</option>
                                            <option value="plombier">Plombier</option>
                                            <option value="electricien">√âlectricien</option>
                                            <option value="peintre">Peintre</option>
                                            <option value="carreleur">Carreleur</option>
                                            <option value="menuisier">Menuisier</option>
                                            <option value="manoeuvre">Man≈ìuvre</option>
                                            <option value="chauffeur">Chauffeur</option>
                                            <option value="gardien">Gardien</option>
                                            <option value="secretaire">Secr√©taire</option>
                                            <option value="comptable">Comptable</option>
                                            <option value="commercial">Commercial</option>
                                            <option value="autre">Autre</option>
                                        </select>
                                    </div>
                                    <div class="grid grid-cols-2 gap-3">
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">Type contrat</label>
                                            <select id="employe-contrat" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                                <option value="cdi">CDI</option>
                                                <option value="cdd">CDD</option>
                                                <option value="stage">Stage</option>
                                                <option value="journalier">Journalier</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">Date embauche *</label>
                                            <input type="date" id="employe-embauche" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" required>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Fin contrat (si CDD)</label>
                                        <input type="date" id="employe-fin-contrat" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                    </div>
                                </div>
                                
                                <!-- R√©mun√©ration -->
                                <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                    <h4 class="font-semibold text-gray-700 flex items-center">
                                        <span class="material-icons text-amber-600 mr-2">payments</span>R√©mun√©ration
                                    </h4>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Salaire brut (FCFA) *</label>
                                        <input type="number" id="employe-salaire" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" required placeholder="150000">
                                    </div>
                                    <div class="grid grid-cols-2 gap-3">
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">Mode paiement</label>
                                            <select id="employe-mode-paiement" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                                <option value="virement">Virement</option>
                                                <option value="especes">Esp√®ces</option>
                                                <option value="mobile">Mobile Money</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">Statut</label>
                                            <select id="employe-statut" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                                <option value="actif">üü¢ Actif</option>
                                                <option value="essai">üîµ Essai</option>
                                                <option value="conge">üü° Cong√©</option>
                                                <option value="parti">‚ö´ Parti</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Notes -->
                                <div>
                                    <label class="block text-gray-600 text-sm mb-1">Notes</label>
                                    <textarea id="employe-notes" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" rows="2"></textarea>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Boutons -->
                        <div class="flex justify-end space-x-3 pt-4 border-t">
                            <button type="button" onclick="closeEmployeModal()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition">
                                Annuler
                            </button>
                            <button type="submit" class="px-8 py-3 bg-gradient-to-r from-indigo-600 to-indigo-800 text-white rounded-xl font-bold hover:from-indigo-700 hover:to-indigo-900 transition shadow-lg">
                                <span class="material-icons align-middle mr-1">save</span>Enregistrer
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================== -->
    <!-- MODAL STOCK -->
    <!-- ============================================== -->
    <div id="stock-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="fixed inset-0 bg-black/60 backdrop-blur-sm" onclick="closeStockModal()"></div>
        <div class="relative min-h-screen flex items-center justify-center p-4">
            <div class="relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden animate__animated animate__fadeInUp animate__faster">
                <!-- Header -->
                <div class="sticky top-0 z-10 px-6 py-4 border-b bg-blue-600">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 id="stock-modal-title" class="text-xl font-bold text-white">Nouvel article</h3>
                            <p class="text-orange-100 text-sm mt-1">Ajoutez un article √† l'inventaire</p>
                        </div>
                        <button onclick="closeStockModal()" class="text-white/80 hover:text-white p-2 hover:bg-white/10 rounded-full transition">
                            <span class="material-icons">close</span>
                        </button>
                    </div>
                </div>
                
                <!-- Form Content -->
                <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 160px);">
                    <form id="stock-form" class="space-y-5">
                        <input type="hidden" id="stock-edit-index">
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Colonne gauche -->
                            <div class="space-y-5">
                                <!-- Identification -->
                                <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                    <h4 class="font-semibold text-gray-700 flex items-center">
                                        <span class="material-icons text-blue-600 mr-2">label</span>Identification
                                    </h4>
                                    <div class="grid grid-cols-2 gap-3">
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">R√©f√©rence</label>
                                            <input type="text" id="stock-reference" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" placeholder="Auto">
                                        </div>
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">Cat√©gorie *</label>
                                            <select id="stock-categorie" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" required>
                                                <option value="">--</option>
                                                <option value="ciment">Ciment</option>
                                                <option value="sable">Sable/Gravier</option>
                                                <option value="fer">Fer/Armature</option>
                                                <option value="brique">Briques</option>
                                                <option value="bois">Bois</option>
                                                <option value="peinture">Peinture</option>
                                                <option value="carrelage">Carrelage</option>
                                                <option value="plomberie">Plomberie</option>
                                                <option value="electricite">√âlectricit√©</option>
                                                <option value="outillage">Outillage</option>
                                                <option value="securite">S√©curit√©/EPI</option>
                                                <option value="autre">Autre</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">D√©signation *</label>
                                        <input type="text" id="stock-nom" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" required placeholder="Nom de l'article">
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Description</label>
                                        <textarea id="stock-description" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" rows="2"></textarea>
                                    </div>
                                </div>
                                
                                <!-- Stock -->
                                <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                    <h4 class="font-semibold text-gray-700 flex items-center">
                                        <span class="material-icons text-green-600 mr-2">inventory</span>Stock
                                    </h4>
                                    <div class="grid grid-cols-3 gap-3">
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">Quantit√© *</label>
                                            <input type="number" id="stock-quantite" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" min="0" required>
                                        </div>
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">Unit√©</label>
                                            <select id="stock-unite" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                                <option value="pcs">Pi√®ces</option>
                                                <option value="kg">Kg</option>
                                                <option value="tonne">Tonnes</option>
                                                <option value="m">M√®tres</option>
                                                <option value="m2">M¬≤</option>
                                                <option value="m3">M¬≥</option>
                                                <option value="l">Litres</option>
                                                <option value="sac">Sacs</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">Seuil alerte</label>
                                            <input type="number" id="stock-seuil" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" min="0" value="5">
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Emplacement</label>
                                        <input type="text" id="stock-emplacement" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" placeholder="Entrep√¥t A">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Colonne droite -->
                            <div class="space-y-5">
                                <!-- Prix -->
                                <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                    <h4 class="font-semibold text-gray-700 flex items-center">
                                        <span class="material-icons text-amber-600 mr-2">sell</span>Prix (FCFA)
                                    </h4>
                                    <div class="grid grid-cols-2 gap-3">
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">Prix achat HT</label>
                                            <input type="number" id="stock-prix-achat" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                        </div>
                                        <div>
                                            <label class="block text-gray-600 text-sm mb-1">Prix vente HT</label>
                                            <input type="number" id="stock-prix" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">TVA</label>
                                        <select id="stock-tva" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                            <option value="0">0%</option>
                                            <option value="18" selected>18%</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <!-- Fournisseur -->
                                <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                    <h4 class="font-semibold text-gray-700 flex items-center">
                                        <span class="material-icons text-purple-600 mr-2">local_shipping</span>Fournisseur
                                    </h4>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Nom</label>
                                        <input type="text" id="stock-fournisseur" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">T√©l√©phone</label>
                                        <input type="tel" id="stock-fournisseur-tel" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">D√©lai livraison (jours)</label>
                                        <input type="number" id="stock-delai" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" min="0">
                                    </div>
                                </div>
                                
                                <!-- Notes -->
                                <div>
                                    <label class="block text-gray-600 text-sm mb-1">Notes</label>
                                    <textarea id="stock-notes" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" rows="2"></textarea>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Boutons -->
                        <div class="flex justify-end space-x-3 pt-4 border-t">
                            <button type="button" onclick="closeStockModal()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition">
                                Annuler
                            </button>
                            <button type="submit" class="px-8 py-3 bg-blue-600 text-gray-900 rounded-xl font-bold hover:bg-blue-700 transition shadow-lg">
                                <span class="material-icons align-middle mr-1">save</span>Enregistrer
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL PROJET -->
    <div id="projet-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="min-h-screen px-4 py-6 flex items-start justify-center bg-black/60 backdrop-blur-sm">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl animate__animated animate__fadeInUp animate__faster">
                <!-- Header -->
                <div class="bg-gradient-to-r from-orange-600 to-orange-800 text-white px-6 py-4 rounded-t-2xl flex items-center justify-between">
                    <h3 id="projet-modal-title" class="text-xl font-bold flex items-center">
                        <span class="material-icons mr-2">construction</span>Nouveau projet
                    </h3>
                    <button onclick="closeProjetModal()" class="text-white/80 hover:text-white transition">
                        <span class="material-icons text-3xl">close</span>
                    </button>
                </div>
                
                <!-- Form -->
                <form id="projet-form" class="p-6 max-h-[75vh] overflow-y-auto">
                    <input type="hidden" id="projet-edit-index">
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Colonne gauche -->
                        <div class="space-y-5">
                            <!-- Infos g√©n√©rales -->
                            <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                <h4 class="font-semibold text-gray-700 flex items-center">
                                    <span class="material-icons text-blue-600 mr-2">info</span>Informations g√©n√©rales
                                </h4>
                                <div>
                                    <label class="block text-gray-600 text-sm mb-1">Nom du projet *</label>
                                    <input type="text" id="projet-nom" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" required placeholder="Ex: R√©novation Villa Almadies">
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">R√©f√©rence</label>
                                        <input type="text" id="projet-reference" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" placeholder="PROJ-2025-001">
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Type</label>
                                        <select id="projet-type" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                            <option value="renovation">üîß R√©novation</option>
                                            <option value="construction">üèóÔ∏è Construction</option>
                                            <option value="amenagement">üè† Am√©nagement</option>
                                            <option value="demolition">üí• D√©molition</option>
                                            <option value="extension">üìê Extension</option>
                                            <option value="entretien">üî® Entretien</option>
                                        </select>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-gray-600 text-sm mb-1">Client *</label>
                                    <select id="projet-client" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                        <option value="">-- S√©lectionner un client --</option>
                                        <script>
                                        // --- AUTO-FILL CLIENT SELECTORS ---
                                        document.addEventListener('DOMContentLoaded', function() {
                                            if (typeof populateClientSelect === 'function' && typeof autoFillClientFields === 'function') {
                                                // Transaction (facture, etc.)
                                                populateClientSelect('trans-client-select', function(client) {
                                                    autoFillClientFields(client, {
                                                        'trans-tiers': 'nom',
                                                        // Ajouter d'autres champs si besoin
                                                    });
                                                });
                                                // Projet
                                                populateClientSelect('projet-client', function(client) {
                                                    autoFillClientFields(client, {
                                                        // Ajouter ici les champs √† auto-remplir pour le projet si besoin
                                                    });
                                                });
                                                // Bail
                                                if (document.getElementById('bail-client-select')) {
                                                    populateClientSelect('bail-client-select', function(client) {
                                                        autoFillClientFields(client, {
                                                            'bail-nom': 'nom',
                                                            'bail-tel': 'telephone',
                                                            'bail-adresse': 'adresse',
                                                            // Ajouter d'autres champs si besoin
                                                        });
                                                    });
                                                }
                                                // Contrat
                                                if (document.getElementById('contrat-client-select')) {
                                                    populateClientSelect('contrat-client-select', function(client) {
                                                        autoFillClientFields(client, {
                                                            'contrat-nom': 'nom',
                                                            'contrat-tel': 'telephone',
                                                            'contrat-adresse': 'adresse',
                                                            // Ajouter d'autres champs si besoin
                                                        });
                                                    });
                                                }
                                            }
                                        });
                                        </script>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Localisation -->
                            <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                <h4 class="font-semibold text-gray-700 flex items-center">
                                    <span class="material-icons text-green-600 mr-2">location_on</span>Localisation
                                </h4>
                                <div>
                                    <label class="block text-gray-600 text-sm mb-1">Adresse du chantier *</label>
                                    <input type="text" id="projet-adresse" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" placeholder="Num√©ro, rue, quartier">
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Ville</label>
                                        <input type="text" id="projet-ville" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" value="Dakar">
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Surface (m¬≤)</label>
                                        <input type="number" id="projet-surface" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" placeholder="0">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Planification -->
                            <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                <h4 class="font-semibold text-gray-700 flex items-center">
                                    <span class="material-icons text-purple-600 mr-2">schedule</span>Planification
                                </h4>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Date d√©but</label>
                                        <input type="date" id="projet-debut" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Date fin pr√©vue</label>
                                        <input type="date" id="projet-fin" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-gray-600 text-sm mb-2">Avancement</label>
                                    <div class="flex items-center gap-3">
                                        <input type="range" id="projet-avancement" min="0" max="100" value="0" class="flex-1" oninput="document.getElementById('projet-avancement-val').textContent = this.value + '%'">
                                        <span id="projet-avancement-val" class="font-bold text-blue-600 w-12">0%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Colonne droite -->
                        <div class="space-y-5">
                            <!-- Budget -->
                            <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                <h4 class="font-semibold text-gray-700 flex items-center">
                                    <span class="material-icons text-amber-600 mr-2">payments</span>Budget (FCFA)
                                </h4>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Budget total</label>
                                        <input type="number" id="projet-budget" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" placeholder="0">
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">D√©pens√©</label>
                                        <input type="number" id="projet-depense" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" placeholder="0">
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Marge (%)</label>
                                        <input type="number" id="projet-marge" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" placeholder="15" min="0" max="100">
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Acompte re√ßu</label>
                                        <input type="number" id="projet-acompte" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" placeholder="0">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- √âquipe -->
                            <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                <h4 class="font-semibold text-gray-700 flex items-center">
                                    <span class="material-icons text-red-600 mr-2">groups</span>√âquipe
                                </h4>
                                <div>
                                    <label class="block text-gray-600 text-sm mb-1">Chef de chantier</label>
                                    <select id="projet-chef" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                        <option value="">-- S√©lectionner --</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-gray-600 text-sm mb-1">Nombre d'ouvriers</label>
                                    <input type="number" id="projet-nb-ouvriers" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" placeholder="0" min="0">
                                </div>
                            </div>
                            
                            <!-- Statut -->
                            <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                <h4 class="font-semibold text-gray-700 flex items-center">
                                    <span class="material-icons text-indigo-600 mr-2">flag</span>Statut & Priorit√©
                                </h4>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Statut</label>
                                        <select id="projet-statut" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                            <option value="planifie">üìã Planifi√©</option>
                                            <option value="en_cours">üîÑ En cours</option>
                                            <option value="suspendu">‚è∏Ô∏è Suspendu</option>
                                            <option value="termine">‚úÖ Termin√©</option>
                                            <option value="annule">‚ùå Annul√©</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Priorit√©</label>
                                        <select id="projet-priorite" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                            <option value="normale">Normale</option>
                                            <option value="haute">üî¥ Haute</option>
                                            <option value="urgente">üö® Urgente</option>
                                            <option value="basse">Basse</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Description -->
                            <div>
                                <label class="block text-gray-600 text-sm mb-1">Description des travaux</label>
                                <textarea id="projet-desc" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" rows="4" placeholder="D√©crivez les travaux √† r√©aliser..."></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Boutons -->
                    <div class="flex justify-end space-x-3 pt-4 border-t mt-6">
                        <button type="button" onclick="closeProjetModal()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition">
                            Annuler
                        </button>
                        <button type="submit" class="px-8 py-3 bg-blue-600 text-gray-900 rounded-xl font-bold hover:bg-blue-700 transition shadow-lg">
                            <span class="material-icons align-middle mr-1">save</span>Enregistrer
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- MODAL DOCUMENT -->
    <div id="document-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="min-h-screen px-4 py-6 flex items-start justify-center bg-black/60 backdrop-blur-sm">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-lg animate__animated animate__fadeInUp animate__faster">
                <!-- Header -->
                <div class="bg-gradient-to-r from-gray-600 to-gray-800 text-white px-6 py-4 rounded-t-2xl flex items-center justify-between">
                    <h3 id="document-modal-title" class="text-xl font-bold flex items-center">
                        <span class="material-icons mr-2">upload_file</span>Nouveau document
                    </h3>
                    <button onclick="closeDocumentModal()" class="text-white/80 hover:text-white transition">
                        <span class="material-icons text-3xl">close</span>
                    </button>
                </div>
                
                <!-- Form -->
                <form id="document-form" class="p-6 space-y-5">
                    <input type="hidden" id="doc-edit-id">
                    
                    <div>
                        <label class="block text-gray-700 font-medium mb-1">Titre *</label>
                        <input type="text" id="doc-titre" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800" required placeholder="Nom du document">
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-700 font-medium mb-1">Cat√©gorie</label>
                            <select id="doc-categorie" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                <option value="contrat">üìÑ Contrat</option>
                                <option value="bail">üè† Bail</option>
                                <option value="facture">üí∞ Facture</option>
                                <option value="devis">üìù Devis</option>
                                <option value="legal">‚öñÔ∏è Document l√©gal</option>
                                <option value="autre">üìã Autre</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-1">Date d'expiration</label>
                            <input type="date" id="doc-expiration" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-medium mb-1">Client associ√©</label>
                        <select id="doc-client" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                            <option value="">-- Aucun --</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-medium mb-1">Projet associ√©</label>
                        <select id="doc-projet" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                            <option value="">-- Aucun --</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Fichier</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-xl p-4 text-center hover:border-blue-400 transition cursor-pointer" onclick="document.getElementById('doc-fichier').click()">
                            <span class="material-icons text-4xl text-gray-400">cloud_upload</span>
                            <p class="text-gray-500 mt-2">Cliquez pour s√©lectionner un fichier</p>
                            <p class="text-gray-400 text-sm">PDF, DOC, JPG, PNG (max 5MB)</p>
                            <input type="file" id="doc-fichier" class="hidden" accept=".pdf,.doc,.docx,.jpg,.png">
                        </div>
                        <p id="doc-fichier-nom" class="text-sm text-green-600 mt-2 hidden"></p>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-medium mb-1">Notes</label>
                        <textarea id="doc-notes" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800" rows="2" placeholder="Notes additionnelles..."></textarea>
                    </div>
                    
                    <!-- Boutons -->
                    <div class="flex justify-end space-x-3 pt-4 border-t">
                        <button type="button" onclick="closeDocumentModal()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition">
                            Annuler
                        </button>
                        <button type="submit" class="px-8 py-3 bg-gradient-to-r from-gray-600 to-gray-800 text-white rounded-xl font-bold hover:from-gray-700 hover:to-gray-900 transition shadow-lg">
                            <span class="material-icons align-middle mr-1">save</span>Enregistrer
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- MODAL CLIENT (CRM) -->
    <div id="client-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="min-h-screen px-4 py-6 flex items-start justify-center bg-black/60 backdrop-blur-sm">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-4xl animate__animated animate__fadeInUp animate__faster">
                <!-- Header -->
                <div class="bg-gradient-to-r from-blue-600 to-blue-800 text-white px-6 py-4 rounded-t-2xl flex items-center justify-between">
                    <h3 id="client-modal-title" class="text-xl font-bold flex items-center">
                        <span class="material-icons mr-2">person_add</span>Nouveau client
                    </h3>
                    <button onclick="closeClientModal()" class="text-white/80 hover:text-white transition">
                        <span class="material-icons text-3xl">close</span>
                    </button>
                </div>
                
                <!-- Form -->
                <form id="client-form" class="p-6 max-h-[75vh] overflow-y-auto">
                    <input type="hidden" id="client-edit-id">
                    
                    <!-- Type de client -->
                    <div class="bg-blue-50 rounded-xl p-4 mb-6">
                        <label class="block text-gray-700 text-sm font-semibold mb-3">Type de client</label>
                        <div class="grid grid-cols-2 gap-4">
                            <label class="relative cursor-pointer">
                                <input type="radio" name="client-type-radio" value="particulier" class="peer sr-only" checked onchange="toggleClientType()">
                                <div class="p-4 border-2 rounded-xl text-center transition peer-checked:border-blue-500 peer-checked:bg-white hover:border-gray-300 bg-white/50">
                                    <span class="material-icons text-3xl text-gray-500 peer-checked:text-blue-600">person</span>
                                    <p class="text-sm font-medium mt-2">Particulier</p>
                                </div>
                            </label>
                            <label class="relative cursor-pointer">
                                <input type="radio" name="client-type-radio" value="entreprise" class="peer sr-only" onchange="toggleClientType()">
                                <div class="p-4 border-2 rounded-xl text-center transition peer-checked:border-blue-500 peer-checked:bg-white hover:border-gray-300 bg-white/50">
                                    <span class="material-icons text-3xl text-gray-500 peer-checked:text-blue-600">business</span>
                                    <p class="text-sm font-medium mt-2">Entreprise</p>
                                </div>
                            </label>
                        </div>
                        <input type="hidden" id="client-type" value="particulier">
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Colonne gauche -->
                        <div class="space-y-5">
                            <!-- Infos Particulier -->
                            <div id="client-particulier-fields" class="bg-gray-50 rounded-xl p-4 space-y-4">
                                <h4 class="font-semibold text-gray-700 flex items-center">
                                    <span class="material-icons text-blue-600 mr-2">badge</span>Identit√©
                                </h4>
                                <div>
                                    <label class="block text-gray-600 text-sm mb-1">Civilit√©</label>
                                    <select id="client-civilite" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                        <option value="M.">Monsieur</option>
                                        <option value="Mme">Madame</option>
                                        <option value="Mlle">Mademoiselle</option>
                                    </select>
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Pr√©nom *</label>
                                        <input type="text" id="client-prenom" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Nom *</label>
                                        <input type="text" id="client-nom" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" required>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Date naissance</label>
                                        <input type="date" id="client-naissance" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">N¬∞ CNI</label>
                                        <input type="text" id="client-cni" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-gray-600 text-sm mb-1">Profession</label>
                                    <input type="text" id="client-profession" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                </div>
                            </div>
                            
                            <!-- Infos Entreprise -->
                            <div id="client-entreprise-fields" class="hidden bg-gray-50 rounded-xl p-4 space-y-4">
                                <h4 class="font-semibold text-gray-700 flex items-center">
                                    <span class="material-icons text-blue-600 mr-2">business</span>Entreprise
                                </h4>
                                <div>
                                    <label class="block text-gray-600 text-sm mb-1">Raison sociale *</label>
                                    <input type="text" id="client-raison-sociale" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">NINEA</label>
                                        <input type="text" id="client-ninea" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">RCCM</label>
                                        <input type="text" id="client-rccm" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-gray-600 text-sm mb-1">Secteur</label>
                                    <select id="client-secteur" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                        <option value="">-- S√©lectionner --</option>
                                        <option value="btp">BTP</option>
                                        <option value="immobilier">Immobilier</option>
                                        <option value="commerce">Commerce</option>
                                        <option value="services">Services</option>
                                        <option value="autre">Autre</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-gray-600 text-sm mb-1">Contact principal</label>
                                    <input type="text" id="client-contact-principal" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                </div>
                            </div>
                            
                            <!-- Coordonn√©es -->
                            <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                <h4 class="font-semibold text-gray-700 flex items-center">
                                    <span class="material-icons text-green-600 mr-2">contact_phone</span>Coordonn√©es
                                </h4>
                                <div>
                                    <label class="block text-gray-600 text-sm mb-1">T√©l√©phone *</label>
                                    <input type="tel" id="client-tel" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" required placeholder="+221 77 XXX XX XX">
                                </div>
                                <div>
                                    <label class="block text-gray-600 text-sm mb-1">T√©l. secondaire</label>
                                    <input type="tel" id="client-tel2" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                </div>
                                <div>
                                    <label class="block text-gray-600 text-sm mb-1">Email</label>
                                    <input type="email" id="client-email" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                </div>
                                <div>
                                    <label class="block text-gray-600 text-sm mb-1">WhatsApp</label>
                                    <input type="tel" id="client-whatsapp" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Colonne droite -->
                        <div class="space-y-5">
                            <!-- Adresse -->
                            <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                <h4 class="font-semibold text-gray-700 flex items-center">
                                    <span class="material-icons text-orange-600 mr-2">location_on</span>Adresse
                                </h4>
                                <div>
                                    <label class="block text-gray-600 text-sm mb-1">Adresse compl√®te</label>
                                    <input type="text" id="client-adresse" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Ville</label>
                                        <input type="text" id="client-ville" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" value="Dakar">
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Pays</label>
                                        <input type="text" id="client-pays" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" value="S√©n√©gal">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Int√©r√™ts -->
                            <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                <h4 class="font-semibold text-gray-700 flex items-center">
                                    <span class="material-icons text-purple-600 mr-2">interests</span>Int√©r√™ts
                                </h4>
                                <div>
                                    <label class="block text-gray-600 text-sm mb-2">Services</label>
                                    <div class="grid grid-cols-2 gap-2">
                                        <label class="flex items-center space-x-2 cursor-pointer">
                                            <input type="checkbox" name="client-services" value="vente" class="w-4 h-4 text-blue-600 rounded">
                                            <span class="text-sm">Vente</span>
                                        </label>
                                        <label class="flex items-center space-x-2 cursor-pointer">
                                            <input type="checkbox" name="client-services" value="location" class="w-4 h-4 text-blue-600 rounded">
                                            <span class="text-sm">Location</span>
                                        </label>
                                        <label class="flex items-center space-x-2 cursor-pointer">
                                            <input type="checkbox" name="client-services" value="renovation" class="w-4 h-4 text-blue-600 rounded">
                                            <span class="text-sm">R√©novation</span>
                                        </label>
                                        <label class="flex items-center space-x-2 cursor-pointer">
                                            <input type="checkbox" name="client-services" value="construction" class="w-4 h-4 text-blue-600 rounded">
                                            <span class="text-sm">Construction</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Budget</label>
                                        <select id="client-budget" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                            <option value="">-- S√©lectionner --</option>
                                            <option value="0-5M">< 5M FCFA</option>
                                            <option value="5M-20M">5 - 20M</option>
                                            <option value="20M-50M">20 - 50M</option>
                                            <option value="50M+">50M+</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Source</label>
                                        <select id="client-source" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                            <option value="">-- S√©lectionner --</option>
                                            <option value="bouche-a-oreille">Bouche √† oreille</option>
                                            <option value="site-web">Site web</option>
                                            <option value="reseaux-sociaux">R√©seaux sociaux</option>
                                            <option value="autre">Autre</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Statut -->
                            <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                                <h4 class="font-semibold text-gray-700 flex items-center">
                                    <span class="material-icons text-indigo-600 mr-2">flag</span>Statut
                                </h4>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Statut</label>
                                        <select id="client-statut" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                            <option value="prospect">üü° Prospect</option>
                                            <option value="actif">üü¢ Actif</option>
                                            <option value="en_negociation">üîµ En n√©go</option>
                                            <option value="vip">‚≠ê VIP</option>
                                            <option value="inactif">‚ö™ Inactif</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-gray-600 text-sm mb-1">Priorit√©</label>
                                        <select id="client-priorite" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                            <option value="normale">Normale</option>
                                            <option value="haute">üî¥ Haute</option>
                                            <option value="basse">Basse</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Notes -->
                            <div>
                                <label class="block text-gray-600 text-sm mb-1">Notes</label>
                                <textarea id="client-notes" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" rows="3" placeholder="Observations..."></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Boutons -->
                    <div class="flex justify-end space-x-3 pt-4 border-t mt-6">
                        <button type="button" onclick="closeClientModal()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition">
                            Annuler
                        </button>
                        <button type="submit" class="px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-800 text-white rounded-xl font-bold hover:from-blue-700 hover:to-blue-900 transition shadow-lg">
                            <span class="material-icons align-middle mr-1">save</span>Enregistrer
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- MODAL RDV (RENDEZ-VOUS) -->
    <div id="rdv-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="min-h-screen px-4 py-6 flex items-start justify-center bg-black/60 backdrop-blur-sm">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-lg animate__animated animate__fadeInUp animate__faster">
                <!-- Header -->
                <div class="bg-gradient-to-r from-green-600 to-green-800 text-white px-6 py-4 rounded-t-2xl flex items-center justify-between">
                    <h3 id="rdv-modal-title" class="text-xl font-bold flex items-center">
                        <span class="material-icons mr-2">event_available</span>Nouveau rendez-vous
                    </h3>
                    <button onclick="closeRdvModal()" class="text-white/80 hover:text-white transition">
                        <span class="material-icons text-3xl">close</span>
                    </button>
                </div>
                
                <!-- Form -->
                <form id="rdv-form" class="p-6 space-y-5">
                    <input type="hidden" id="rdv-edit-index">
                    
                    <!-- S√©lection client existant -->
                    <div class="bg-blue-50 rounded-xl p-4">
                        <label class="block text-gray-700 text-sm font-semibold mb-2 flex items-center">
                            <span class="material-icons text-blue-600 mr-2 text-sm">auto_awesome</span>
                            Charger un client existant (auto-remplissage)
                        </label>
                        <select id="rdv-client-select" onchange="fillClientInfo(this.value, 'rdv')" class="w-full px-4 py-3 bg-white border-2 border-blue-200 rounded-xl text-gray-800 focus:border-blue-500">
                            <option value="">-- Nouveau client / Saisie manuelle --</option>
                        </select>
                    </div>
                    
                    <!-- Client -->
                    <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                        <h4 class="font-semibold text-gray-700 flex items-center">
                            <span class="material-icons text-blue-600 mr-2">person</span>Client
                        </h4>
                        <div>
                            <label class="block text-gray-600 text-sm mb-1">Nom du client *</label>
                            <input type="text" id="rdv-client" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" required placeholder="Nom complet">
                        </div>
                        <div>
                            <label class="block text-gray-600 text-sm mb-1">T√©l√©phone</label>
                            <input type="tel" id="rdv-phone" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" placeholder="+221 77 XXX XX XX">
                        </div>
                        <div>
                            <label class="block text-gray-600 text-sm mb-1">Email</label>
                            <input type="email" id="rdv-email" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" placeholder="email@exemple.com">
                        </div>
                    </div>
                    
                    <!-- Date & Heure -->
                    <div class="bg-gray-50 rounded-xl p-4 space-y-4">
                        <h4 class="font-semibold text-gray-700 flex items-center">
                            <span class="material-icons text-green-600 mr-2">schedule</span>Date & Heure
                        </h4>
                        <div class="grid grid-cols-2 gap-3">
                            <div>
                                <label class="block text-gray-600 text-sm mb-1">Date *</label>
                                <input type="date" id="rdv-date" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" required>
                            </div>
                            <div>
                                <label class="block text-gray-600 text-sm mb-1">Heure *</label>
                                <input type="time" id="rdv-time" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" required>
                            </div>
                        </div>
                        <div>
                            <label class="block text-gray-600 text-sm mb-1">Dur√©e estim√©e</label>
                            <select id="rdv-duree" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                <option value="30">30 minutes</option>
                                <option value="60" selected>1 heure</option>
                                <option value="90">1h30</option>
                                <option value="120">2 heures</option>
                                <option value="180">3 heures</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Service & Statut -->
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="block text-gray-600 text-sm mb-1">Type de service</label>
                            <select id="rdv-service" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                <option value="visite">üè† Visite de bien</option>
                                <option value="estimation">üìä Estimation</option>
                                <option value="signature">‚úçÔ∏è Signature</option>
                                <option value="travaux">üîß Devis travaux</option>
                                <option value="reunion">üë• R√©union</option>
                                <option value="chantier">üèóÔ∏è Visite chantier</option>
                                <option value="autre">üìã Autre</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-600 text-sm mb-1">Statut</label>
                            <select id="rdv-status" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800">
                                <option value="confirme">‚úÖ Confirm√©</option>
                                <option value="attente">‚è≥ En attente</option>
                                <option value="annule">‚ùå Annul√©</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Lieu -->
                    <div>
                        <label class="block text-gray-600 text-sm mb-1">Lieu du RDV</label>
                        <input type="text" id="rdv-lieu" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" placeholder="Adresse ou indication">
                    </div>
                    
                    <!-- Notes -->
                    <div>
                        <label class="block text-gray-600 text-sm mb-1">Notes</label>
                        <textarea id="rdv-notes" class="w-full px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-800" rows="2" placeholder="D√©tails importants..."></textarea>
                    </div>
                    
                    <!-- Rappel -->
                    <div class="flex items-center space-x-3">
                        <input type="checkbox" id="rdv-rappel" class="w-4 h-4 text-green-600 rounded">
                        <label for="rdv-rappel" class="text-gray-700 text-sm cursor-pointer">Envoyer un rappel au client (WhatsApp/SMS)</label>
                    </div>
                    
                    <!-- Boutons -->
                    <div class="flex justify-end space-x-3 pt-4 border-t">
                        <button type="button" onclick="closeRdvModal()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition">
                            Annuler
                        </button>
                        <button type="submit" class="px-8 py-3 bg-gradient-to-r from-green-600 to-green-800 text-white rounded-xl font-bold hover:from-green-700 hover:to-green-900 transition shadow-lg">
                            <span class="material-icons align-middle mr-1">save</span>Enregistrer
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ============================================= -->
    <!-- MODAL: CATALOGUE / ANNONCES -->
    <!-- ============================================= -->
    <div id="catalogue-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="fixed inset-0 bg-black/60 backdrop-blur-sm" onclick="closeCatalogueModal()"></div>
            <div class="relative bg-white rounded-3xl shadow-2xl w-full max-w-2xl transform transition-all animate__animated animate__fadeInUp animate__faster">
                <!-- Header -->
                <div class="sticky top-0 z-10 px-6 py-4 border-b bg-gradient-to-r from-blue-600 to-blue-800 rounded-t-3xl">
                    <div class="flex items-center justify-between">
                        <h3 id="catalogue-modal-title" class="text-xl font-bold text-white flex items-center">
                            <span class="material-icons mr-2">home_work</span>Nouvelle annonce
                        </h3>
                        <button onclick="closeCatalogueModal()" class="text-white/80 hover:text-white transition p-1">
                            <span class="material-icons">close</span>
                        </button>
                    </div>
                </div>
                <!-- Form -->
                <form id="catalogue-form" class="p-6 space-y-5">
                    <input type="hidden" id="catalogue-edit-index">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Titre de l'annonce *</label>
                        <input type="text" id="catalogue-title" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500" required placeholder="Ex: Villa 4 chambres √† Almadies">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Description *</label>
                        <textarea id="catalogue-desc" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500" rows="4" required placeholder="Description d√©taill√©e du bien..."></textarea>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Prix *</label>
                            <input type="text" id="catalogue-price" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500" required placeholder="Ex: 150 000 000 FCFA">
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Localisation</label>
                            <input type="text" id="catalogue-location" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500" placeholder="Ex: Dakar, Almadies">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Cat√©gorie de publication *</label>
                            <select id="catalogue-category" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500" required>
                                <option value="vente">üè† Vente & Achat</option>
                                <option value="location-courte">‚è±Ô∏è Location Courte Dur√©e</option>
                                <option value="location-longue">üìÖ Location Longue Dur√©e</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Type de bien</label>
                            <select id="catalogue-type" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500">
                                <option value="maison">Maison</option>
                                <option value="appartement">Appartement</option>
                                <option value="terrain">Terrain</option>
                                <option value="bureau">Bureau / Local</option>
                                <option value="autre">Autre</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Statut</label>
                        <select id="catalogue-status" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500">
                            <option value="actif">‚úÖ Actif (visible sur le site)</option>
                            <option value="brouillon">üìù Brouillon (non visible)</option>
                            <option value="vendu">üè∑Ô∏è Vendu / Lou√©</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Photos (jusqu'√† 10 images)</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-xl p-4 text-center hover:border-blue-400 transition cursor-pointer" id="catalogue-dropzone">
                            <input type="file" id="catalogue-images" accept="image/*" multiple class="hidden" onchange="previewCatalogueImages(this)">
                            <label for="catalogue-images" class="cursor-pointer block">
                                <span class="material-icons text-4xl text-gray-400">add_photo_alternate</span>
                                <p class="text-gray-500 mt-2">Cliquez ou glissez-d√©posez vos images</p>
                                <p class="text-xs text-gray-400 mt-1">PNG, JPG, WEBP ‚Ä¢ Max 5MB par image</p>
                            </label>
                        </div>
                        <!-- Preview des images multiples -->
                        <div id="catalogue-images-preview" class="mt-4 grid grid-cols-4 gap-2 hidden">
                            <!-- Les previews seront ajout√©es ici dynamiquement -->
                        </div>
                        <!-- Images existantes (en √©dition) -->
                        <div id="catalogue-existing-images" class="mt-4 hidden">
                            <p class="text-sm text-gray-600 mb-2 font-medium">Images actuelles :</p>
                            <div id="catalogue-existing-images-grid" class="grid grid-cols-4 gap-2">
                                <!-- Images existantes seront affich√©es ici -->
                            </div>
                        </div>
                    </div>
                    <!-- Buttons -->
                    <div class="flex justify-end space-x-3 pt-4 border-t">
                        <button type="button" onclick="closeCatalogueModal()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition">
                            Annuler
                        </button>
                        <button type="submit" class="px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-800 text-white rounded-xl font-bold hover:from-blue-700 hover:to-blue-900 transition shadow-lg">
                            <span class="material-icons align-middle mr-1">save</span>Enregistrer
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ============================================= -->
    <!-- MODAL: CAROUSEL / SLIDES -->
    <!-- ============================================= -->
    <div id="carousel-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="fixed inset-0 bg-black/60 backdrop-blur-sm" onclick="closeCarouselModal()"></div>
            <div class="relative bg-white rounded-3xl shadow-2xl w-full max-w-2xl transform transition-all animate__animated animate__fadeInUp animate__faster">
                <!-- Header -->
                <div class="sticky top-0 z-10 px-6 py-4 border-b bg-gradient-to-r from-purple-600 to-purple-800 rounded-t-3xl">
                    <div class="flex items-center justify-between">
                        <h3 id="carousel-modal-title" class="text-xl font-bold text-white flex items-center">
                            <span class="material-icons mr-2">view_carousel</span>Nouveau slide
                        </h3>
                        <button onclick="closeCarouselModal()" class="text-white/80 hover:text-white transition p-1">
                            <span class="material-icons">close</span>
                        </button>
                    </div>
                </div>
                <!-- Form -->
                <form id="carousel-form" class="p-6 space-y-5">
                    <input type="hidden" id="carousel-edit-index">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Titre *</label>
                        <input type="text" id="carousel-title" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-purple-500" required placeholder="Titre principal du slide">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Sous-titre</label>
                        <input type="text" id="carousel-subtitle" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-purple-500" placeholder="Sous-titre ou accroche">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Image du slide</label>
                        <div class="space-y-3">
                            <div class="border-2 border-dashed border-gray-300 rounded-xl p-4 text-center hover:border-purple-400 transition cursor-pointer">
                                <input type="file" id="carousel-image" accept="image/*" class="hidden">
                                <label for="carousel-image" class="cursor-pointer">
                                    <span class="material-icons text-4xl text-gray-400">image</span>
                                    <p class="text-gray-500 mt-2">T√©l√©charger une image</p>
                                </label>
                            </div>
                            <div class="text-center text-gray-400">‚Äî ou ‚Äî</div>
                            <input type="url" id="carousel-image-url" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-purple-500" placeholder="URL de l'image">
                        </div>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Lien du bouton</label>
                        <input type="text" id="carousel-link" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-purple-500" placeholder="#contact ou /page">
                    </div>
                    <!-- Buttons -->
                    <div class="flex justify-end space-x-3 pt-4 border-t">
                        <button type="button" onclick="closeCarouselModal()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition">
                            Annuler
                        </button>
                        <button type="submit" class="px-8 py-3 bg-gradient-to-r from-purple-600 to-purple-800 text-white rounded-xl font-bold hover:from-purple-700 hover:to-purple-900 transition shadow-lg">
                            <span class="material-icons align-middle mr-1">save</span>Enregistrer
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ============================================= -->
    <!-- MODAL: ACC√àS EMPLOY√â -->
    <!-- ============================================= -->
    <div id="employee-access-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="fixed inset-0 bg-black/60 backdrop-blur-sm" onclick="closeEmployeeAccessModal()"></div>
            <div class="relative bg-white rounded-3xl shadow-2xl w-full max-w-2xl transform transition-all animate__animated animate__fadeInUp animate__faster">
                <!-- Header -->
                <div class="sticky top-0 z-10 px-6 py-4 border-b bg-gradient-to-r from-blue-600 to-indigo-700 rounded-t-3xl">
                    <div class="flex items-center justify-between">
                        <h3 id="employee-access-modal-title" class="text-xl font-bold text-white flex items-center">
                            <span class="material-icons mr-2">person_add</span>Nouvel acc√®s employ√©
                        </h3>
                        <button onclick="closeEmployeeAccessModal()" class="text-white/80 hover:text-white transition p-1">
                            <span class="material-icons">close</span>
                        </button>
                    </div>
                </div>
                <!-- Form -->
                <form id="employee-access-form" class="p-6 space-y-5">
                    <input type="hidden" id="emp-access-edit-id">
                    
                    <!-- Informations de base -->
                    <div class="bg-gray-50 rounded-xl p-4">
                        <h4 class="font-semibold text-gray-800 mb-3 flex items-center gap-2">
                            <span class="material-icons text-blue-600 text-sm">badge</span> Informations du compte
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-1">Nom complet *</label>
                                <input type="text" id="emp-access-name" placeholder="Ex: Mamadou Diallo" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800" required>
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-1">Email *</label>
                                <input type="email" id="emp-access-email" placeholder="employe@kfsbtp.sn" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800" required>
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-1">Identifiant de connexion *</label>
                                <input type="text" id="emp-access-username" placeholder="mdiallo" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800" required>
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-1">Mot de passe *</label>
                                <div class="relative">
                                    <input type="password" id="emp-access-password" placeholder="Min. 8 caract√®res" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800 pr-20" minlength="8" required>
                                    <button type="button" onclick="generateRandomPassword()" class="absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1 bg-blue-500 text-white rounded-lg text-xs hover:bg-blue-600 font-semibold shadow">
                                        G√©n√©rer
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- R√¥le et statut -->
                    <div class="bg-gray-50 rounded-xl p-4">
                        <h4 class="font-semibold text-gray-800 mb-3 flex items-center gap-2">
                            <span class="material-icons text-purple-600 text-sm">admin_panel_settings</span> R√¥le et statut
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-1">Poste / Fonction</label>
                                <input type="text" id="emp-access-poste" placeholder="Ex: Comptable, Commercial..." class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-1">R√¥le</label>
                                <select id="emp-access-role" class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800">
                                    <option value="employe">Employ√© (acc√®s limit√©)</option>
                                    <option value="manager">Manager (acc√®s √©tendu)</option>
                                    <option value="comptable">Comptable (finances)</option>
                                    <option value="commercial">Commercial (clients/projets)</option>
                                </select>
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-gray-700 text-sm font-medium mb-1">Statut du compte</label>
                                <div class="flex gap-4">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="radio" name="emp-access-status" value="actif" checked class="w-4 h-4 text-green-600">
                                        <span class="text-gray-700">Actif</span>
                                    </label>
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="radio" name="emp-access-status" value="inactif" class="w-4 h-4 text-gray-600">
                                        <span class="text-gray-700">Inactif</span>
                                    </label>
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="radio" name="emp-access-status" value="suspendu" class="w-4 h-4 text-red-600">
                                        <span class="text-gray-700">Suspendu</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Permissions / Modules accessibles -->
                    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-100">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="font-semibold text-gray-800 flex items-center gap-2">
                                <span class="material-icons text-indigo-600 text-sm">key</span> Modules accessibles
                            </h4>
                            <div class="flex gap-2">
                                <button type="button" onclick="selectAllModules()" class="text-xs px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 font-semibold shadow">Tout s√©lectionner</button>
                                <button type="button" onclick="deselectAllModules()" class="text-xs px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600 font-semibold shadow">Tout d√©s√©lectionner</button>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                            <label class="flex items-center gap-2 p-3 bg-white rounded-xl border-2 border-transparent hover:border-blue-300 cursor-pointer transition">
                                <input type="checkbox" name="emp-modules" value="dashboard" class="w-4 h-4 text-blue-600 rounded" checked>
                                <span class="material-icons text-blue-600 text-lg">dashboard</span>
                                <span class="text-sm text-gray-700">Dashboard</span>
                            </label>
                            <label class="flex items-center gap-2 p-3 bg-white rounded-xl border-2 border-transparent hover:border-green-300 cursor-pointer transition">
                                <input type="checkbox" name="emp-modules" value="finances" class="w-4 h-4 text-green-600 rounded">
                                <span class="material-icons text-green-600 text-lg">account_balance</span>
                                <span class="text-sm text-gray-700">Finances</span>
                            </label>
                            <label class="flex items-center gap-2 p-3 bg-white rounded-xl border-2 border-transparent hover:border-purple-300 cursor-pointer transition">
                                <input type="checkbox" name="emp-modules" value="clients" class="w-4 h-4 text-purple-600 rounded">
                                <span class="material-icons text-purple-600 text-lg">people</span>
                                <span class="text-sm text-gray-700">Clients</span>
                            </label>
                            <label class="flex items-center gap-2 p-3 bg-white rounded-xl border-2 border-transparent hover:border-orange-300 cursor-pointer transition">
                                <input type="checkbox" name="emp-modules" value="projets" class="w-4 h-4 text-orange-600 rounded">
                                <span class="material-icons text-orange-600 text-lg">engineering</span>
                                <span class="text-sm text-gray-700">Projets</span>
                            </label>
                            <label class="flex items-center gap-2 p-3 bg-white rounded-xl border-2 border-transparent hover:border-yellow-300 cursor-pointer transition">
                                <input type="checkbox" name="emp-modules" value="employes" class="w-4 h-4 text-yellow-600 rounded">
                                <span class="material-icons text-yellow-600 text-lg">badge</span>
                                <span class="text-sm text-gray-700">Employ√©s</span>
                            </label>
                            <label class="flex items-center gap-2 p-3 bg-white rounded-xl border-2 border-transparent hover:border-red-300 cursor-pointer transition">
                                <input type="checkbox" name="emp-modules" value="stocks" class="w-4 h-4 text-red-600 rounded">
                                <span class="material-icons text-red-600 text-lg">inventory</span>
                                <span class="text-sm text-gray-700">Stocks</span>
                            </label>
                            <label class="flex items-center gap-2 p-3 bg-white rounded-xl border-2 border-transparent hover:border-indigo-300 cursor-pointer transition">
                                <input type="checkbox" name="emp-modules" value="documents" class="w-4 h-4 text-indigo-600 rounded">
                                <span class="material-icons text-indigo-600 text-lg">folder</span>
                                <span class="text-sm text-gray-700">Documents</span>
                            </label>
                            <label class="flex items-center gap-2 p-3 bg-white rounded-xl border-2 border-transparent hover:border-pink-300 cursor-pointer transition">
                                <input type="checkbox" name="emp-modules" value="rdv" class="w-4 h-4 text-pink-600 rounded">
                                <span class="material-icons text-pink-600 text-lg">event</span>
                                <span class="text-sm text-gray-700">Rendez-vous</span>
                            </label>
                            <label class="flex items-center gap-2 p-3 bg-white rounded-xl border-2 border-transparent hover:border-cyan-300 cursor-pointer transition">
                                <input type="checkbox" name="emp-modules" value="messages" class="w-4 h-4 text-cyan-600 rounded">
                                <span class="material-icons text-cyan-600 text-lg">mail</span>
                                <span class="text-sm text-gray-700">Messages</span>
                            </label>
                            <label class="flex items-center gap-2 p-3 bg-white rounded-xl border-2 border-transparent hover:border-gray-300 cursor-pointer transition">
                                <input type="checkbox" name="emp-modules" value="catalogue" class="w-4 h-4 text-gray-600 rounded">
                                <span class="material-icons text-gray-600 text-lg">home_work</span>
                                <span class="text-sm text-gray-700">Catalogue</span>
                            </label>
                            <label class="flex items-center gap-2 p-3 bg-white rounded-xl border-2 border-transparent hover:border-green-300 cursor-pointer transition">
                                <input type="checkbox" name="emp-modules" value="factures" class="w-4 h-4 text-green-600 rounded">
                                <span class="material-icons text-green-600 text-lg">receipt</span>
                                <span class="text-sm text-gray-700">Factures</span>
                            </label>
                            <label class="flex items-center gap-2 p-3 bg-white rounded-xl border-2 border-transparent hover:border-blue-300 cursor-pointer transition">
                                <input type="checkbox" name="emp-modules" value="analytics" class="w-4 h-4 text-blue-600 rounded">
                                <span class="material-icons text-blue-600 text-lg">insights</span>
                                <span class="text-sm text-gray-700">Statistiques</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Notes -->
                    <div>
                        <label class="block text-gray-700 text-sm font-medium mb-1">Notes internes</label>
                        <textarea id="emp-access-notes" rows="2" placeholder="Notes sur cet acc√®s..." class="w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl text-gray-800"></textarea>
                    </div>
                    
                    <!-- Buttons -->
                    <div class="flex justify-end space-x-3 pt-4 border-t">
                        <button type="button" onclick="closeEmployeeAccessModal()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition">
                            Annuler
                        </button>
                        <button type="submit" class="px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-700 text-white rounded-xl font-bold hover:from-blue-700 hover:to-indigo-800 transition shadow-lg flex items-center gap-2">
                            <span class="material-icons">save</span>Cr√©er l'acc√®s
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ============================================= -->
    <!-- MODAL: T√âMOIGNAGES -->
    <!-- ============================================= -->
    <div id="temoignage-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="fixed inset-0 bg-black/60 backdrop-blur-sm" onclick="closeTemoignageModal()"></div>
            <div class="relative bg-white rounded-3xl shadow-2xl w-full max-w-2xl transform transition-all animate__animated animate__fadeInUp animate__faster">
                <!-- Header -->
                <div class="sticky top-0 z-10 px-6 py-4 border-b bg-gradient-to-r from-green-600 to-green-800 rounded-t-3xl">
                    <div class="flex items-center justify-between">
                        <h3 id="temoignage-modal-title" class="text-xl font-bold text-white flex items-center">
                            <span class="material-icons mr-2">format_quote</span>Nouveau t√©moignage
                        </h3>
                        <button onclick="closeTemoignageModal()" class="text-white/80 hover:text-white transition p-1">
                            <span class="material-icons">close</span>
                        </button>
                    </div>
                </div>
                <!-- Form -->
                <form id="temoignage-form" class="p-6 space-y-5">
                    <input type="hidden" id="temoignage-edit-index">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Nom du client *</label>
                        <input type="text" id="temoignage-nom" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-green-500" required placeholder="Ex: Mamadou Diallo">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Fonction / Localisation</label>
                        <input type="text" id="temoignage-fonction" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-green-500" placeholder="Ex: Propri√©taire √† Dakar">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">T√©moignage *</label>
                        <textarea id="temoignage-texte" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-green-500" rows="4" required placeholder="Le t√©moignage du client..."></textarea>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Note</label>
                        <div class="flex space-x-2">
                            <label class="flex-1 cursor-pointer">
                                <input type="radio" name="temoignage-note" value="5" class="peer sr-only" checked>
                                <div class="p-3 border-2 rounded-xl text-center peer-checked:border-yellow-500 peer-checked:bg-yellow-50 hover:bg-gray-50 transition">
                                    <span class="text-2xl">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                    <p class="text-xs text-gray-500 mt-1">Excellent</p>
                                </div>
                            </label>
                            <label class="flex-1 cursor-pointer">
                                <input type="radio" name="temoignage-note" value="4" class="peer sr-only">
                                <div class="p-3 border-2 rounded-xl text-center peer-checked:border-yellow-500 peer-checked:bg-yellow-50 hover:bg-gray-50 transition">
                                    <span class="text-2xl">‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                    <p class="text-xs text-gray-500 mt-1">Tr√®s bien</p>
                                </div>
                            </label>
                            <label class="flex-1 cursor-pointer">
                                <input type="radio" name="temoignage-note" value="3" class="peer sr-only">
                                <div class="p-3 border-2 rounded-xl text-center peer-checked:border-yellow-500 peer-checked:bg-yellow-50 hover:bg-gray-50 transition">
                                    <span class="text-2xl">‚≠ê‚≠ê‚≠ê</span>
                                    <p class="text-xs text-gray-500 mt-1">Bien</p>
                                </div>
                            </label>
                        </div>
                    </div>
                    <div class="flex items-center space-x-3 bg-gray-50 p-4 rounded-xl">
                        <input type="checkbox" id="temoignage-visible" class="w-5 h-5 text-green-600 rounded" checked>
                        <label for="temoignage-visible" class="text-gray-700 cursor-pointer">Visible sur le site public</label>
                    </div>
                    <!-- Buttons -->
                    <div class="flex justify-end space-x-3 pt-4 border-t">
                        <button type="button" onclick="closeTemoignageModal()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition">
                            Annuler
                        </button>
                        <button type="submit" class="px-8 py-3 bg-gradient-to-r from-green-600 to-green-800 text-white rounded-xl font-bold hover:from-green-700 hover:to-green-900 transition shadow-lg">
                            <span class="material-icons align-middle mr-1">save</span>Enregistrer
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ============================================= -->
    <!-- MODAL: FAQ -->
    <!-- ============================================= -->
    <div id="faq-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="fixed inset-0 bg-black/60 backdrop-blur-sm" onclick="closeFaqModal()"></div>
            <div class="relative bg-white rounded-3xl shadow-2xl w-full max-w-2xl transform transition-all animate__animated animate__fadeInUp animate__faster">
                <!-- Header -->
                <div class="sticky top-0 z-10 px-6 py-4 border-b bg-blue-600 rounded-t-3xl">
                    <div class="flex items-center justify-between">
                        <h3 id="faq-modal-title" class="text-xl font-bold text-white flex items-center">
                            <span class="material-icons mr-2">help_outline</span>Nouvelle question FAQ
                        </h3>
                        <button onclick="closeFaqModal()" class="text-white/80 hover:text-white transition p-1">
                            <span class="material-icons">close</span>
                        </button>
                    </div>
                </div>
                <!-- Form -->
                <form id="faq-form" class="p-6 space-y-5">
                    <input type="hidden" id="faq-edit-index">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Question *</label>
                        <input type="text" id="faq-question" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-orange-500" required placeholder="Ex: Comment puis-je obtenir un devis ?">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">R√©ponse *</label>
                        <textarea id="faq-reponse" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-orange-500" rows="5" required placeholder="La r√©ponse d√©taill√©e √† la question..."></textarea>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Cat√©gorie</label>
                        <select id="faq-categorie" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-orange-500">
                            <option value="general">G√©n√©ral</option>
                            <option value="services">Services</option>
                            <option value="tarifs">Tarifs</option>
                            <option value="processus">Processus</option>
                        </select>
                    </div>
                    <div class="flex items-center space-x-3 bg-gray-50 p-4 rounded-xl">
                        <input type="checkbox" id="faq-visible" class="w-5 h-5 text-orange-600 rounded" checked>
                        <label for="faq-visible" class="text-gray-700 cursor-pointer">Visible sur le site public</label>
                    </div>
                    <!-- Buttons -->
                    <div class="flex justify-end space-x-3 pt-4 border-t">
                        <button type="button" onclick="closeFaqModal()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition">
                            Annuler
                        </button>
                        <button type="submit" class="px-8 py-3 bg-blue-600 text-gray-900 rounded-xl font-bold hover:bg-blue-700 transition shadow-lg">
                            <span class="material-icons align-middle mr-1">save</span>Enregistrer
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ============================================= -->
    <!-- MODAL: M√âDIAS -->
    <!-- ============================================= -->
    <div id="media-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="fixed inset-0 bg-black/60 backdrop-blur-sm" onclick="closeMediaModal()"></div>
            <div class="relative bg-white rounded-3xl shadow-2xl w-full max-w-2xl transform transition-all animate__animated animate__fadeInUp animate__faster">
                <!-- Header -->
                <div class="sticky top-0 z-10 px-6 py-4 border-b bg-gradient-to-r from-pink-600 to-rose-600 rounded-t-3xl">
                    <div class="flex items-center justify-between">
                        <h3 id="media-modal-title" class="text-xl font-bold text-white flex items-center">
                            <span class="material-icons mr-2">perm_media</span>Uploader un m√©dia
                        </h3>
                        <button onclick="closeMediaModal()" class="text-white/80 hover:text-white transition p-1">
                            <span class="material-icons">close</span>
                        </button>
                    </div>
                </div>
                <!-- Form -->
                <form id="media-form" class="p-6 space-y-5">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Fichier *</label>
                        <div class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-pink-400 transition cursor-pointer" id="media-dropzone">
                            <input type="file" id="media-file" accept="image/*,video/*" class="hidden" required onchange="previewMediaFile(this)">
                            <label for="media-file" class="cursor-pointer">
                                <span class="material-icons text-5xl text-gray-400">cloud_upload</span>
                                <p class="text-gray-600 mt-3 font-medium">Glissez-d√©posez ou cliquez pour s√©lectionner</p>
                                <p class="text-gray-400 text-sm mt-1">Images (JPG, PNG, WebP) ou Vid√©os (MP4)</p>
                            </label>
                            <div id="media-preview" class="mt-4 hidden">
                                <img src="" alt="Preview" class="max-h-48 mx-auto rounded-lg">
                                <p id="media-filename" class="text-sm text-gray-500 mt-2"></p>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Type</label>
                            <select id="media-type" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-pink-500">
                                <option value="image">üñºÔ∏è Image</option>
                                <option value="logo">üé® Logo</option>
                                <option value="video">üé¨ Vid√©o</option>
                                <option value="document">üìÑ Document</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Cat√©gorie</label>
                            <select id="media-categorie" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-pink-500">
                                <option value="general">G√©n√©ral</option>
                                <option value="projets">Projets</option>
                                <option value="equipe">√âquipe</option>
                                <option value="bureaux">Bureaux</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Titre / Description</label>
                        <input type="text" id="media-titre" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-pink-500" placeholder="Description du fichier (optionnel)">
                    </div>
                    <!-- Buttons -->
                    <div class="flex justify-end space-x-3 pt-4 border-t">
                        <button type="button" onclick="closeMediaModal()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition">
                            Annuler
                        </button>
                        <button type="submit" class="px-8 py-3 bg-gradient-to-r from-pink-600 to-rose-600 text-white rounded-xl font-bold hover:from-pink-700 hover:to-rose-700 transition shadow-lg">
                            <span class="material-icons align-middle mr-1">upload</span>Uploader
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- ============================================= -->
    <!-- MODAL: FACTURE / DEVIS -->
    <!-- ============================================= -->
    <div id="facture-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="fixed inset-0 bg-black/60 backdrop-blur-sm" onclick="closeFactureModal()"></div>
            <div class="relative bg-white rounded-3xl shadow-2xl w-full max-w-3xl transform transition-all animate__animated animate__fadeInUp animate__faster">
                <!-- Header -->
                <div class="sticky top-0 z-10 px-6 py-4 border-b bg-gradient-to-r from-blue-600 to-indigo-700 rounded-t-3xl">
                    <div class="flex items-center justify-between">
                        <h3 id="facture-modal-title" class="text-xl font-bold text-white flex items-center">
                            <span class="material-icons mr-2">receipt_long</span>Nouvelle facture
                        </h3>
                        <button onclick="closeFactureModal()" class="text-white/80 hover:text-white transition p-1">
                            <span class="material-icons">close</span>
                        </button>
                    </div>
                </div>
                <!-- Form -->
                <form id="facture-form" class="p-6 max-h-[75vh] overflow-y-auto space-y-5">
                    <input type="hidden" id="facture-edit-id">
                    
                    <!-- Type et Dates -->
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Type</label>
                            <select id="facture-type" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500">
                                <option value="facture">üìÑ Facture</option>
                                <option value="devis">üìã Devis</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">Date *</label>
                            <input type="date" id="facture-date" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500" required>
                        </div>
                        <div>
                            <label class="block text-gray-700 font-medium mb-2">√âch√©ance</label>
                            <input type="date" id="facture-echeance" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800 focus:border-blue-500">
                        </div>
                    </div>
                    
                    <!-- Section Client -->
                    <div class="bg-blue-50 rounded-xl p-5 border border-blue-100">
                        <h4 class="font-bold text-blue-800 mb-4 flex items-center">
                            <span class="material-icons mr-2">person</span>Informations client
                        </h4>
                        <div class="bg-white rounded-xl p-4 mb-4 border-2 border-dashed border-blue-200">
                            <label class="block text-blue-800 text-sm font-bold mb-2">
                                <span class="material-icons align-middle text-sm mr-1">flash_on</span>Charger un client existant
                            </label>
                            <select id="facture-client" onchange="fillClientInfo(this.value, 'facture')" class="w-full px-4 py-3 border-2 border-blue-300 rounded-xl text-gray-800 focus:border-blue-500">
                                <option value="">-- S√©lectionner ou saisir manuellement --</option>
                            </select>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-gray-700 text-sm mb-1">Nom / Raison sociale *</label>
                                <input type="text" id="facture-client-nom" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800" placeholder="Nom du client" required>
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm mb-1">Email</label>
                                <input type="email" id="facture-client-email" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800" placeholder="email@exemple.com">
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm mb-1">T√©l√©phone</label>
                                <input type="tel" id="facture-client-tel" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800" placeholder="+221 77 000 00 00">
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm mb-1">Adresse</label>
                                <input type="text" id="facture-client-adresse" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800" placeholder="Adresse compl√®te">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Lignes de facture -->
                    <div class="bg-gray-50 rounded-xl p-5">
                        <h4 class="font-bold text-gray-800 mb-4 flex items-center justify-between">
                            <span><span class="material-icons align-middle mr-2">list_alt</span>Articles / Services</span>
                        </h4>
                        <div id="facture-lignes" class="space-y-3 mb-4">
                            <!-- Lignes dynamiques -->
                        </div>
                        <button type="button" onclick="addFactureLigne()" class="w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 hover:border-blue-400 hover:text-blue-600 transition flex items-center justify-center">
                            <span class="material-icons mr-1">add</span> Ajouter une ligne
                        </button>
                    </div>
                    
                    <!-- Totaux -->
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-5">
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Sous-total HT</span>
                                <span id="facture-subtotal" class="font-semibold">0 FCFA</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <div class="flex items-center space-x-2">
                                    <span class="text-gray-600">TVA (18%)</span>
                                    <select id="facture-tva-toggle" class="text-xs px-2 py-1 border rounded-lg">
                                        <option value="oui">Avec TVA</option>
                                        <option value="non">Sans TVA</option>
                                    </select>
                                </div>
                                <span id="facture-tva">0 FCFA</span>
                            </div>
                            <div class="flex justify-between text-xl font-bold border-t-2 border-blue-200 pt-3">
                                <span>Total TTC</span>
                                <span id="facture-total" class="text-blue-600">0 FCFA</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Notes -->
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Notes / Conditions</label>
                        <textarea id="facture-notes" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl text-gray-800" rows="2" placeholder="Conditions de paiement, informations suppl√©mentaires..."></textarea>
                    </div>
                    
                    <!-- Buttons -->
                    <div class="flex justify-end space-x-3 pt-4 border-t">
                        <button type="button" onclick="closeFactureModal()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition">
                            Annuler
                        </button>
                        <button type="submit" class="px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-700 text-white rounded-xl font-bold hover:from-blue-700 hover:to-indigo-800 transition shadow-lg">
                            <span class="material-icons align-middle mr-1">save</span>Enregistrer
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Conteneur Notifications Toast -->
    <div id="notifications-container"></div>
    
    <!-- PWA Install Prompt -->
    <div id="pwa-install-prompt" class="fixed bottom-6 right-6 glass-card rounded-2xl p-4 shadow-2xl hidden animate__animated animate__fadeInUp z-50">
        <div class="flex items-center space-x-4">
            <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
                <span class="material-icons text-green-600 text-2xl">install_mobile</span>
            </div>
            <div>
                <p class="font-bold text-gray-800">Installer l'application</p>
                <p class="text-sm text-gray-500">Acc√©dez rapidement au dashboard</p>
            </div>
            <button id="pwa-install-btn" class="pwa-install-btn text-white px-4 py-2 rounded-xl font-semibold">
                Installer
            </button>
            <button id="pwa-dismiss-btn" class="text-gray-400 hover:text-gray-600">
                <span class="material-icons">close</span>
            </button>
        </div>
    </div>

    <!-- Logo KFS en Base64 pour les PDFs -->
    <script src="logo-base64.js"></script>
    <!-- Firebase Realtime Database -->
    <script src="firebase-config.js"></script>
    <script src="admin.js"></script>

<script>
// Bouton de r√©initialisation du mot de passe admin
document.addEventListener('DOMContentLoaded', function() {
    var btn = document.getElementById('reset-password-btn');
    if (btn) {
        btn.onclick = function() {
            localStorage.removeItem('adminPasswordHash');
            alert('Mot de passe r√©initialis√© √† admin123. Rechargez la page et connectez-vous avec admin123.');
            location.reload();
        };
    }
});
</script>
<script>
// Menu mobile - Toggle sidebar
function toggleMobileMenu() {
    const sidebar = document.getElementById('admin-sidebar');
    const overlay = document.getElementById('sidebar-overlay');
    
    if (sidebar && overlay) {
        const isOpen = !sidebar.classList.contains('-translate-x-full');
        
        if (isOpen) {
            // Fermer
            sidebar.classList.add('-translate-x-full');
            overlay.classList.add('hidden');
            document.body.style.overflow = '';
        } else {
            // Ouvrir
            sidebar.classList.remove('-translate-x-full');
            overlay.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
    }
}

document.addEventListener('DOMContentLoaded', function() {
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const closeSidebarBtn = document.getElementById('close-sidebar-btn');
    const overlay = document.getElementById('sidebar-overlay');
    const navLinks = document.querySelectorAll('#admin-sidebar nav button');
    
    // Bouton hamburger
    if (mobileMenuBtn) {
        mobileMenuBtn.addEventListener('click', toggleMobileMenu);
    }
    
    // Bouton fermer
    if (closeSidebarBtn) {
        closeSidebarBtn.addEventListener('click', toggleMobileMenu);
    }
    
    // Clic sur overlay
    if (overlay) {
        overlay.addEventListener('click', toggleMobileMenu);
    }
    
    // Fermer le menu quand on clique sur un lien (mobile)
    navLinks.forEach(link => {
        link.addEventListener('click', function() {
            if (window.innerWidth < 1024) {
                toggleMobileMenu();
            }
        });
    });
    
    // R√©initialiser l'√©tat sur resize
    window.addEventListener('resize', function() {
        const sidebar = document.getElementById('admin-sidebar');
        const overlay = document.getElementById('sidebar-overlay');
        
        if (window.innerWidth >= 1024) {
            if (sidebar) sidebar.classList.remove('-translate-x-full');
            if (overlay) overlay.classList.add('hidden');
            document.body.style.overflow = '';
        } else {
            if (sidebar && !sidebar.classList.contains('-translate-x-full')) {
                sidebar.classList.add('-translate-x-full');
            }
        }
    });
});
</script>
</body>
</html>
